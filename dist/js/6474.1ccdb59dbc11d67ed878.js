(self.webpackChunkreact_webpack=self.webpackChunkreact_webpack||[]).push([[6474,116,5767,3702,4647,4338],{86140:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var i=a(58548),r=a.n(i),n=a(78829),l=a.n(n),o=a(51765),m=a.n(o),d=a(93287),c=a.n(d),u=a(24309),s=a.n(u),p=a(33929),f=a.n(p),_=a(71649),b=a.n(_),y=a(69984),v=a.n(y),g=a(11845),h=a.n(g),q=a(67294),N=a(45697),x=a.n(N),E=a(16941),S=a(20022);function D(e,t){var a=f()(e);if(s()){var i=s()(e);t&&(i=i.filter((function(t){return c()(e,t).enumerable}))),a.push.apply(a,i)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){v()(e,t,a[t])})):m()?l()(e,m()(a)):D(Object(a)).forEach((function(t){r()(e,t,c()(a,t))}))}return e}function k(e){var t=e.componentData,a=e.updateContainerData,i=e.tab,r=e.styles,n=(e.idx,h()(e,["idx"]));return q.createElement(E._O,{group:"formItem",style:w({position:"relative",zIndex:2},r),list:t.children,setList:function(e){return a(e,t,i)},ghostClass:"ghost-class",animation:150,filter:".placeholder-view",disabled:e.disabled,className:"sortable-kit"},t.children.map((function(e,t){return q.createElement(S.default,b()({key:e.id},n,{idx:t,componentData:e}))})))}k.propTypes={componentData:x().object,tab:x().string,updateContainerData:x().func,styles:x().object},k.defaultProps={componentData:{children:[]},tab:"1",updateContainerData:function(){},styles:{minHeight:100}};const C=k},89270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var i=a(71649),r=a.n(i),n=a(67294),l=a(45697),o=a.n(l),m=a(80411),d=a.n(m),c=a(16941),u=a(20022);function s(e){return n.createElement("div",{className:"container-view-mobile",onClick:function(e){return e.stopPropagation()}},n.createElement("div",{className:"wrapper-view-mobile"},n.createElement("div",{className:"phone-title"},e.title),n.createElement("div",{className:"tmpl-container-box"},n.createElement(c._O,{group:"formItem",invertSwap:!0,list:e.containerData,setList:function(t){return e.setList(t,e.tab)},ghostClass:"ghost-class",animation:150,className:d()({"tmpl-container":!0,disabled:e.disabled}),disabled:e.disabled},e.containerData.map((function(t,a){return n.createElement(u.default,r()({key:t.id,idx:a},e,{componentData:t}))}))))))}s.propTypes={containerData:o().array,tab:o().string,setList:o().func},s.defaultProps={containerData:[],tab:"1",setList:function(){}};const p=s},46786:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var i=a(67294),r=a(45697),n=a.n(r);function l(e){return i.createElement("div",{className:"custom-attach"},i.createElement("div",{className:"custom-attach-container"},i.createElement("div",{className:"custom-attach-title"},i.createElement("span",null,e.componentData.form.label)),i.createElement("div",{className:"attach-wrapper"},i.createElement("img",{className:"ico",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/wxapp-micro-reimburse/apply/common/upload.svg"}),i.createElement("div",{className:"text"},"上传附件"))))}l.propTypes={componentData:n().object},l.defaultProps={componentData:{}};const o=l},6652:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(67294),r=a(45697),n=a.n(r),l=a(49101),o=a(34046),m=a(86140);function d(){return i.createElement("div",{className:"placeholder-view"},i.createElement("p",{style:{marginBottom:5}},"可拖入多个控件"),i.createElement("p",null,"（不包括明细控件、业务组件、说明文字及分割条）"))}var c={minHeight:108,paddingBottom:10};function u(e){return i.createElement("div",{className:"custom-detailed"},i.createElement("div",{className:"custom-detailed-title"},i.createElement("span",null,e.componentData.form.label,i.createElement(o.Z,{visible:e.componentData.form.required},i.createElement("span",{style:{color:"#FF3B30"}},"*")))),i.createElement("div",{className:"custom-detailed-container",style:c},i.createElement(o.Z,{visible:0===e.componentData.children.length},i.createElement(d,null)),i.createElement(m.default,e)),i.createElement(o.Z,{visible:void 0!==e.componentData.form.tip},i.createElement("div",{className:"custom-detailed-footer"},i.createElement(l.Z,null),e.componentData.form.tip)))}u.propTypes={componentData:n().object},u.defaultProps={componentData:{}};const s=u},14399:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(67294),r=a(45697),n=a.n(r),l=a(42304);function o(e){var t=e.componentData.form;return i.createElement(i.Fragment,null,i.createElement(l.default,{noBorder:e.noBorder,componentData:{form:{label:t.start_time_label,tip:t.tip,required:t.required}}}),i.createElement(l.default,{componentData:{form:{label:t.end_time_label,tip:t.tip,required:t.required}}}),i.createElement(l.default,{componentData:{form:{label:"时长",required:t.required}}}))}o.propTypes={componentData:n().object},o.defaultProps={componentData:{}};const m=o},81961:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var i=a(67294),r=a(45697),n=a.n(r),l=a(80411),o=a.n(l),m=a(34046);function d(e){return i.createElement("div",null,i.createElement("div",{className:o()({"custom-area":"textarea"===e.componentData.inputType,"custom-input":"textarea"!==e.componentData.inputType,"no-border":e.noBorder})},i.createElement("div",null,e.componentData.form.label,i.createElement(m.Z,{visible:e.componentData.form.required},i.createElement("span",{style:{color:"#FF3B30"}},"*"))),i.createElement("div",null,e.componentData.form.tip)))}d.propTypes={componentData:n().object,label:n().string,tip:n().string},d.defaultProps={componentData:{form:{}},label:"",tip:""};const c=d},42304:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(67294),r=a(8812),n=a(34046),l=a(80411),o=a.n(l);const m=function(e){return i.createElement("div",{className:o()({"custom-input":!0,"custom-select":!0,"no-border":e.noBorder})},i.createElement("div",null,e.componentData.form.label,i.createElement(n.Z,{visible:e.componentData.form.required},i.createElement("span",{className:"required"},"*"))),i.createElement("div",null,e.componentData.form.tip),i.createElement("div",{className:"right-out-line"},i.createElement(r.Z,null)))}},82550:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var i=a(67294);const r=function(e){return i.createElement("div",{className:"get-invoice"},i.createElement("h1",{className:"fee-list-title"},i.createElement("span",{className:"label"},e.componentData.form.label),i.createElement("span",{className:"required"},"*")),i.createElement("img",{className:"img",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/wbx-qwapp/reimburse/step-1/add_bg.png"}),i.createElement("div",{className:"tip"},"选择发票，自动生成费用明细"),i.createElement("div",{className:"button"},i.createElement("div",{id:"choose-invoice",className:"btn btn-primary btn-large"},e.componentData.form.tip||"添加发票")),i.createElement("div",{id:"choose-manual-invoice",className:"expense-add"},i.createElement("div",null,i.createElement("span",{className:"font-size-26 underline"},"没有发票？手动录入金额"))),i.createElement("div",{className:"split"}))}},22047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var i=a(67294);const r=function(e){return i.createElement("div",{className:"payment-info"},i.createElement("p",null,e.componentData.form.label," ",i.createElement("span",{className:"ant-form-item-required"},"*")),i.createElement("div",{className:"payment-info-btn"},i.createElement("div",null,e.componentData.form.tip)))}},15854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var i=a(67294);const r=function(e){return i.createElement("div",{className:"get-list"},i.createElement("h1",{className:"fee-list-title"},i.createElement("span",{className:"label"},e.componentData.form.label),i.createElement("span",{className:"required"},"*")),i.createElement("img",{className:"img",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/wbx-qwapp/reimburse/no-data.png"}),i.createElement("div",{className:"button"},i.createElement("div",{id:"choose-invoice",className:"btn btn-primary btn-large"},e.componentData.form.tip)))}},20022:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var i=a(71649),r=a.n(i),n=a(69984),l=a.n(n),o=a(11845),m=a.n(o),d=a(67294),c=a(45697),u=a.n(c),s=a(80411),p=a.n(s),f=a(81961),_=a(6652),b=a(42304),y=a(14399),v=(a(22047),a(46786)),g=a(15854),h=a(72427),q=a(82550);const N={RelatePurchaseApply:b.default,department:b.default,bank:b.default,title:b.default,rel_person:b.default,child_list:g.default,apply_list:b.default,fee_info:q.default,attach_list:v.default,oa_flows:b.default,summary:f.default,commiter:b.default,reimburseer:b.default,custom_input:f.default,custom_area:f.default,custom_check_box:b.default,custom_radio:b.default,custom_duration:y.default,custom_detailed:_.default,custom_number:f.default,custom_amount:f.default,custom_columns:_.default,custom_attach:v.default,custom_date:b.default,travel_type:b.default,travel_list:_.default,clbrt_enterprise:b.default,amount:f.default,date:b.default,payment_info:g.default,guest:b.default,contract:b.default,trans_list:h.default,lend_info:b.default,trans_way:b.default};var x=a(30019);function E(e){var t,a=e.componentData,i=e.currentComponent,n=e.tab,o=e.checkComponentForm,c=e.componentsNameMap,u=e.template_type,s=(e.noBorder,m()(e,["noBorder"])),f=N[a.name];return d.createElement("div",{className:p()((t={"layer-item":!0,"layer-select":i&&i.id===a.id,fixed:i&&(c[i.name]&&c[i.name].fixed||x.Be["".concat(i.name,"_").concat(u)]),error:o&&o["".concat(a.name,"_").concat(a.id)],split:!x.Qh[a.name]},l()(t,e.idx,!0),l()(t,a.name,!0),t)),onClick:function(t){e.disabled||(e.setCurrent(n,a),t.stopPropagation())}},d.createElement("img",{className:"layer-close-btn",onClick:function(t){e.deleteComponent(n,a.id),t.stopPropagation()},src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/close.svg"}),d.createElement(f,r()({noBorder:0===e.idx||!x.Qh[a.name]},s)))}E.propTypes={componentData:u().object,currentComponent:u().object,setCurrent:u().func,tab:u().string,deleteComponent:u().func},E.defaultProps={componentData:{children:[]},currentComponent:null,setCurrent:function(){},deleteComponent:function(){},tab:"1"};const S=E},72427:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(66406),r=a.n(i),n=a(67294),l=a(14399),o={placeholder:"请选择",start_time_label:"开始时间",end_time_label:"结束时间"};const m=function(e){var t=e.componentData||{form:{}};return t.form=r()({},t.form,o),n.createElement("div",{className:"travel-itinerary"},n.createElement("div",{className:"travel-itinerary-section"},n.createElement("div",null,"请选择起始地"),n.createElement("div",{className:"section-icon"},n.createElement("img",{src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/wbx-qwapp/apply/travel/route.svg"})),n.createElement("div",null,"请选择目的地")),n.createElement(l.default,{noBorder:!0,componentData:t}))}},30019:(e,t,a)=>{"use strict";a.d(t,{l8:()=>y,BV:()=>o,Ct:()=>m,YC:()=>d,gF:()=>c,J4:()=>s,oG:()=>_,CM:()=>p,Dn:()=>u,Be:()=>b,Qh:()=>v});for(var i=["custom_detailed","custom_columns","attach_list","custom_attach","date","amount","travel_type"],r=[{name:"trans_list",title:"行程清单",desc:"时间与地点",form:{date_type:"YY-MM-DD-hh-mm",required:!0,print:!0,type:"Array",items:{end_point:{field:"end_point",label:"目的地点",required:!0,type:"String"},start_point:{field:"start_point",label:"开始地点",required:!0,type:"String"}}},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中",mustIn:{c:"travel_list",msg:"该组件只能在出差明细中",template_type:2}}},{name:"department",title:"承担部门",form:{label:"承担部门",tip:"请选择承担部门",required:!0,print:!0,default_type:"target_department",source:"target_department"},print_fixed:!0,required_fixed:!0,count:0},{name:"bank",title:"收款账户",desc:"个人账户",form:{label:"收款账号",tip:"请选择",default_type:"empty",write_req:"any_individual",source:"sys_account",required:!0,print:!0},required_fixed:!0,print_fixed:!0,count:0},{name:"title",title:"承担主体",form:{label:"承担主体",tip:"请选择抬头",required:!0,print:!0,default_type:"empty",source:"all"},print_fixed:!0,required_fixed:!0,count:0},{name:"rel_person",title:"相关人",desc:"参与人",form:{label:"相关人",tip:"请选择",safety_control:"0",required:!1,print:!0},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中",mustIn:{c:"travel_list",msg:"该组件只能在出差明细中",template_type:2}}},{name:"child_list",title:"报销清单",desc:"报销清单",fixed:!0,form:{label:"报销清单",tip:"添加一笔报销",required:!0,print:!0},print_fixed:!0,required_fixed:!0,count:0,includedContainer:{container:"1",msg:"该组件不能添加到报销清单中,只能添加到首页中"}},{name:"apply_list",title:"关联单据",desc:"关联内部申请单",exclude:[],bill_type:"reimburse",form:{label:"关联申请单",tip:"请选择",apply_type:null,limit_apply_range:["bear_reimburse_apply"],required:!1,print:!0,relation_apply_type:[],limit_apply_number:"multiple"},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"fee_info",title:"费用明细",desc:"费用明细",exclude:[],form:{label:"费用明细",tip:"添加发票",required:!0,print:!0},print_fixed:!0,required_fixed:!0,count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"oa_flows",title:"关联单据",desc:"关联外部单据",form:{label:"关联单据",tip:"请选择",bill_type:1,limit_number:1,relation_limit:"multiple",runtime:["qwh5","wxapp"],limit_range:"outside",required:!1,print:!1},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"summary",title:"事由",inputType:"textarea",form:{label:"事由",tip:"请输入事由",length_limit:1024,required:!0,print:!0},print_fixed:!0,required_fixed:!0,count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"commiter",title:"提单人",form:{label:"提单人",required:!0,print:!0,default_type:"commiter"},print_fixed:!0,required_fixed:!0,count:0},{name:"reimburseer",title:"承担人",form:{label:"承担人",required:!0,print:!0,default_type:"commiter",source:"proxy_range",tip:"请选择承担人"},count:0,print_fixed:!0,required_fixed:!0},{name:"travel_type",title:"出差类型",desc:"本地/外地出差",exclude:[],form:{label:"出行类型",tip:"请先择",options:[{}],required:!0,print:!0},print_fixed:!0,count:0},{name:"travel_list",title:"出差明细",desc:"行程明细",children:[],form:{label:"出差明细",tip:"增加行程",required:!0,print:!0},required_fixed:!0,print_fixed:!0,count:0,exclude:i},{name:"clbrt_enterprise",title:"供应商",desc:"付款供应商",form:{label:"供应商",tip:"请选择",staff_create:"supplier_bank",supplier_scope:"all",required:!0,print:!0},count:0,print_fixed:!0,required_fixed:!0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"amount",title:"付款金额",desc:"付款金额",inputType:"number",form:{label:"付款金额",tip:"请输入金额",decimal_length:2,required:!0,print:!0},required_fixed:!0,print_fixed:!0,count:0},{name:"date",title:"付款日期",form:{label:"付款日期",tip:"请选择",date_type:"YY-MM-DD-hh-mm",default_type:"empty",required:!0,print:!0},required_fixed:!0,print_fixed:!0,count:0},{name:"payment_info",title:"付款信息",desc:"选择付款方式",form:{label:"付款信息",tip:"添加付款",pay_type:"pay_arrival",required:!0,print:!0},pay_arrival_fixed:!0,print_fixed:!0,required_fixed:!0,count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"guest",title:"相关客户",desc:"关联客户",form:{label:"相关客户",tip:"请选择",relate_type:"external_data",order_url:"",required:!1,print:!1,runtime:["qwh5","wxapp"]},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中",mustIn:{c:"travel_list",msg:"该组件只能在出差明细中",template_type:2}}},{name:"contract",title:"关联合同",desc:"关联合同",form:{label:"关联合同",tip:"请手动填写",default_type:"manual_input",order_url:"",runtime:["qwh5","wxapp"],required:!1,print:!1},count:0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中"}},{name:"lend_info",title:"核销借款",desc:"核销借款",form:{label:"核销借款",tip:"请选择",des_apply_type:"all",required:!1,print:!0},count:0,includedContainer:{container:"1",msg:"该组件不能添加到报销清单中，只能添加首页"}},{name:"trans_way",title:"出行方式",desc:"出行方式",form:{field:"trans_way",label:"出行方式",tip:"请选择",required:!0,print:!0,type:"String",options:[{}]},count:0,required_fixed:!0,print_fixed:!0,includedContainer:{container:"2",msg:"该组件不能添加到首页中，只能添加到报销清单中",mustIn:{c:"travel_list",msg:"该组件只能在出差明细中",template_type:2}}}],n=i.concat(r.reduce((function(e,t){return e.push(t.name),e}),[])),l=0;l<r.length;l++)if("TravelDetailed"===r[l].name){r[l].exclude=n;break}var o=[["apply_list","trans_list"]],m=[{name:"custom_input",title:"单行文本",inputType:"text",form:{label:"单行文本",tip:"请输入",default_type:"empty",default_value:"",length_limit:200,required:!1,print:!0}},{name:"custom_area",title:"多行文本",inputType:"textarea",form:{label:"多行文本",tip:"请输入",default_type:"empty",default_value:"",length_limit:200,required:!1,print:!0}},{name:"custom_check_box",title:"多选框",form:{label:"多选框",tip:"请选择",required:!1,print:!0,options:[{}]}},{name:"custom_radio",title:"单选框",form:{label:"单选框",tip:"请选择",required:!1,print:!0,options:[{}]}},{name:"custom_duration",title:"时长",form:{start_time_label:"开始时间",end_time_label:"结束时间",tip:"选择",date_type:"YY-MM-DD-hh-mm",default_type:"empty",default_value:"",required:!0,print:!0}},{name:"custom_detailed",title:"明细",children:[],exclude:n,form:{label:"明细",tip:"添加明细",required:!1,print:!0}},{name:"custom_number",title:"数字",inputType:"number",form:{label:"数字",tip:"请输入数字",decimal_length:0,required:!1,print:!0}},{name:"custom_amount",title:"金额",inputType:"number",form:{label:"金额",tip:"请输入金额",decimal_length:2,required:!0,print:!0}},{name:"custom_columns",title:"分栏",children:[],form:{label:"分栏",required:!1,print:!0},exclude:n},{name:"custom_date",title:"日期",form:{label:"日期",tip:"请选择",date_type:"YY-MM-DD-hh-mm",default_type:"empty",required:!0,print:!0}},{name:"custom_attach",title:"附件",form:{field:"custom_attach",label:"附件",required:!1,print:!1},count:0}].concat(r).reduce((function(e,t){return e[t.name]=t,e}),{}),d={amount_2:{title:"招待金额",desc:"招待金额",form:{label:"招待金额"}},amount_4:{title:"付款金额",desc:"付款金额",form:{label:"付款金额"}},amount_3:{title:"借款金额",desc:"借款金额",form:{label:"借款金额"}},date_2:{title:"接待日期",desc:"接待日期",form:{label:"接待日期"}},date_4:{title:"付款日期",desc:"付款日期",form:{label:"付款日期"}},date_3:{title:"预计还款日期",desc:"还款日期",form:{label:"预计还款日期"}}},c={1:{navTitle:"报销单",containerTitle:"报销单-报销清单"},2:{navTitle:"申请单",containerTitle:"申请单"},3:{navTitle:"借款单",containerTitle:"借款单"},4:{navTitle:"付款单",containerTitle:"付款单"}},u={commiter:!0,custom_attach:!0,reimburseer:!0,title:!0,department:!0,bank:!0},s={commiter:!0,reimburseer:!0,department:!0,title:!0,summary:!0,trans_way:!0,fee_info:!0};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a={};return e.forEach((function(e){a[e[t]]=e})),a}var f={bank:{province:""},guest:{name:" "}};function _(e,t){return"Object"===e?f[t]?f[t]:{}:["fee_info"].includes(t)?[]:"Array"===e&&t.includes("trans_list")?[{start_point:"xxx",end_point:"xxx"}]:"Array"===e&&t.includes("custom_attach")?[{attach_url:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/attach_preview.svg",attach_name:"示例",thumbnail_url:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/attach_preview.svg"}]:"Array"===e?[{}]:""}var b={trans_list_1:!1,trans_list_2:!0,trans_way_2:!0},y={1:{amount:"",fee_info:[],template_type:1,created_at:""},2:{template_type:2,created_at:""},3:{template_type:3,created_at:""},4:{template_type:4,fee_info:[],bank:{province:""},date:null,amount:null,pay_way:"",created_at:""}},v={custom_input:!0,custom_area:!0,custom_check_box:!0,custom_radio:!0,custom_duration:!0,custom_number:!0,custom_amount:!0,custom_date:!0,commiter:!0,reimburseer:!0,department:!0,title:!0,trans_way:!0}},55456:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(67294),r=a(80411),n=a.n(r),l=a(34046),o=a(46643);const m=function(e){return i.createElement("div",{className:n()({"form-container":!0,open:e.open})},i.createElement(l.Z,{visible:e.currentComponent},i.createElement(o.default,e)))}},68351:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var i=a(58548),r=a.n(i),n=a(78829),l=a.n(n),o=a(51765),m=a.n(o),d=a(93287),c=a.n(d),u=a(24309),s=a.n(u),p=a(94513),f=a.n(p),_=a(33929),b=a.n(_),y=a(89060),v=a.n(y),g=a(93133),h=a.n(g),q=a(69984),N=a.n(q),x=a(74720),E=a.n(x),S=a(66406),D=a.n(S),w=a(48550),k=a.n(w),C=a(67294),T=a(16941),O=a(48086),j=a(57016),A=a(71577),z=a(67724),I=a(80411),B=a.n(I),M=a(41584),F=a(89270),P=a(55456),Z=a(30019),Y=a(14284),J=[{name:"custom_input",title:"单行文本",type:1,fixed:!1,model:{field:"custom_input",label:"单行文本",type:"String"},items:{}},{name:"custom_area",title:"多行文本",type:1,fixed:!1,model:{field:"custom_area",label:"多行文本",type:"String"},items:{}},{name:"custom_check_box",title:"多选框",type:1,fixed:!1,model:{field:"custom_check_box",label:"多选框",type:"Array"},items:{label:{field:"label",type:"String"},value:{field:"value",type:"String"}}},{name:"custom_radio",title:"单选框",type:1,fixed:!1,model:{field:"custom_radio",label:"单选框",type:"Object"},items:{label:{field:"label",type:"String"},value:{field:"value",type:"String"}}},{name:"custom_duration",title:"时长",type:1,fixed:!1,model:{field:"custom_duration",label:"时长",type:"Object"},items:{duration:{field:"duration",label:"时长",type:"Number"},end_time:{field:"end_time",label:"结束时间",type:"Number"},start_time:{field:"start_time",label:"开始时间",type:"Number"}}},{name:"custom_detailed",title:"明细",type:1,fixed:!1,model:{field:"custom_detailed",label:"明细",type:"Array"},items:{}},{name:"custom_number",title:"数字",type:1,fixed:!1,model:{field:"custom_number",label:"数字",type:"Number"},items:{}},{name:"custom_amount",title:"金额",type:1,fixed:!1,model:{field:"custom_amount",label:"金额",type:"Number"},items:{}},{name:"custom_columns",title:"分栏",type:1,fixed:!1,model:{field:"custom_columns",label:"分栏",type:"Object"},items:{}},{name:"custom_attach",title:"附件",type:1,fixed:!1,model:{field:"attach_list",label:"附件列表",type:"Array"},items:{attach_name:{field:"attach_name",type:"String"},attach_url:{field:"attach_url",type:"String"},size:{field:"size",type:"Number"},thumbnail_url:{field:"thumbnail_url",type:"String"}}},{name:"custom_date",title:"日期",type:1,fixed:!1,model:{field:"custom_date",label:"日期",type:"Number"},items:{}},{name:"apply_list",title:"关联单据",type:2,fixed:!1,model:{label:"关联单据",tip:"请选择",type:"Array"},items:{date:{field:"date",label:"招待日期",type:"Number"},id:{field:"id",label:"申请单id",required:!0,type:"String"},summary:{field:"summary",label:"事由",required:!0,type:"String"},time:{field:"time",label:"提单时间",required:!0,type:"Number"},travel_list:{field:"travel_list",items:{trans_time:{field:"trans_time",items:{duration:{field:"duration",label:"时长",required:!0,type:"Number"},end_time:{field:"end_time",label:"行程结束时间",required:!0,type:"Number"},start_time:{field:"start_time",label:"行程开始时间",required:!0,type:"Number"}},label:"时长",type:"Object"}},label:"出差明细",type:"Array"},type:{field:"type",label:"类型",required:!0,type:"Number"}}},{name:"oa_flows",title:"关联单据",type:2,fixed:!1,model:{field:"oa_flows",label:"关联单据",type:"Array"},items:{flow_id:{field:"flow_id",label:"流程id",required:!0,type:"String"}}},{name:"rel_person",title:"相关人",type:2,fixed:!1,model:{field:"rel_person",label:"相关人",type:"Array"},items:{name:{field:"name",label:"用户名",required:!0,type:"String"},uid:{field:"uid",label:"用户id",required:!0,type:"Number"}}},{name:"trans_list",title:"行程明细",type:2,fixed:!1,model:{field:"trans_list",label:"行程明细",type:"Array"},items:{end_point:{field:"end_point",label:"目的地点",required:!0,type:"String"},start_point:{field:"start_point",label:"开始地点",required:!0,type:"String"}}},{name:"travel_list",title:"出差明细",type:2,fixed:!1,model:{field:"travel_list",label:"行程明细",type:"Array"},items:{trans_time:{field:"trans_time",items:{duration:{field:"duration",label:"时长",required:!0,type:"Number"},end_time:{field:"end_time",label:"行程结束时间",required:!0,type:"Number"},start_time:{field:"start_time",label:"行程开始时间",required:!0,type:"Number"}},label:"时长",type:"Object"}}},{name:"commiter",title:"提单人",type:2,fixed:!0,model:{field:"commiter",label:"提单人",type:"Object"},items:{name:{field:"name",label:"用户名",required:!0,type:"String"},uid:{field:"uid",label:"用户uid",required:!0,type:"Number"}}},{name:"reimburseer",title:"承担人",type:2,fixed:!0,model:{field:"reimburseer",label:"承担人",type:"Object"},items:{name:{field:"name",label:"用户名",required:!0,type:"String"},uid:{field:"uid",label:"用户uid",required:!0,type:"Number"}}},{name:"title",title:"费用主体",type:2,fixed:!0,model:{field:"title",label:"费用主体",type:"Object"},items:{id:{field:"id",label:"抬头id",required:!0,type:"Number"},name:{field:"name",label:"抬头名",required:!0,type:"String"}}},{name:"department",title:"承担部门",type:2,fixed:!0,model:{field:"department",label:"承担部门",type:"Object"},items:{full_name:{field:"full_name",label:"部门全名",required:!0,type:"String"},id:{field:"id",label:"部门id",required:!0,type:"Number"},name:{field:"name",label:"部门名",required:!0,type:"String"}}},{name:"summary",title:"事由",type:2,fixed:!0,model:{field:"summary",label:"事由",type:"String"},items:{}},{name:"child_list",title:"报销清单",type:2,fixed:!0,model:{field:"child_list",label:"报销清单",type:"Array"}},{name:"bank",title:"收款账户",type:2,fixed:!0,model:{field:"bank",label:"收款账户",type:"Object"},items:{bank_name:{field:"bank_name",label:"银行名称",required:!0,type:"String"},id:{field:"id",label:"银行卡id",required:!0,type:"Number"},number:{field:"number",label:"卡号",required:!0,type:"String"},user_name:{field:"user_name",label:"开户名称",required:!0,type:"String"}}},{name:"fee_info",title:"费用明细",type:2,fixed:!0,model:{field:"fee_info",label:"费用明细",type:"Array"},items:{attach_list:{field:"attach_list",items:{attach_name:{field:"attach_name",label:"",required:!0,type:"String"},attach_url:{field:"attach_url",label:"",required:!0,type:"String"},size:{field:"size",label:"",required:!0,type:"Number"},thumbnail_url:{field:"thumbnail_url",label:"",required:!0,type:"String"}},label:"附件",required:!0,type:"Array"},fee_name:{field:"fee_name",label:"费用名称",required:!0,type:"String"},fee_type:{field:"fee_type",label:"费用类型",required:!0,type:"Number"},invoice_count:{field:"invoice_count",label:"总发票数",required:!0,type:"Number"},invoice_list:{field:"invoice_list",items:{amount:{field:"amount",label:"金额",required:!0,type:"Number"},attach_list:{field:"attach_list",items:{attach_name:{field:"attach_name",label:"",required:!0,type:"String"},attach_url:{field:"attach_url",label:"",required:!0,type:"String"},size:{field:"size",label:"",required:!0,type:"Number"},thumbnail_url:{field:"thumbnail_url",label:"",required:!0,type:"String"}},label:"发票附件",required:!0,type:"Array"},check_state:{field:"check_state",label:"查验状态",required:!0,type:"Number"},invoice_id:{field:"invoice_id",label:"",required:!0,type:"String"},invoice_type:{field:"invoice_type",label:"",required:!0,type:"Number"},note:{field:"note",label:"",required:!0,type:"String"},order_sn:{field:"order_sn",label:"",required:!0,type:"String"},reimburse_amount:{field:"reimburse_amount",label:"报销金额",required:!0,type:"Number"},sales_name:{field:"sales_name",label:"",required:!0,type:"String"},source:{field:"source",label:"",required:!0,type:"Number"},ticket_code:{field:"ticket_code",label:"",required:!0,type:"String"},ticket_date:{field:"ticket_date",label:"",required:!0,type:"Number"},ticket_sn:{field:"ticket_sn",label:"",required:!0,type:"String"},verify_info:{field:"verify_info",items:{verify_msg:{field:"verify_msg",label:"审核消息",required:!0,type:"String"},verity_status:{field:"verity_status",label:"审核结果",required:!0,type:"Number"}},label:"智能审核结果",required:!0,type:"Array"}},label:"发票列表",required:!0,type:"Array"},note:{field:"note",label:"摘要",required:!0,type:"String"},parent_fee_name:{field:"parent_fee_name",label:"父级费用名称",required:!0,type:"String"},parent_fee_type:{field:"parent_fee_type",label:"父级费用类型",required:!0,type:"Number"},total_amount:{field:"total_amount",label:"总金额",required:!0,type:"Number"}}}],L={id:3501,form_type:413,view:[{component:"commiter",fixed:!0,id:111,order:0,pid:0,type:2},{component:"reimburseer",fixed:!0,id:222,order:1,pid:0,type:2},{component:"department",fixed:!0,id:444,order:2,pid:0,type:2},{component:"title",fixed:!0,id:555,order:3,pid:0,type:2},{component:"travel_type",id:1122,order:4,pid:0,type:2},{component:"summary",fixed:!0,id:1133,order:5,pid:0,type:2},{component:"custom_attach",id:1155,order:7,pid:0,type:1}],model:[{component:"commiter",default_type:"commiter",field:"commiter",id:111,items:{name:{field:"name",label:"用户名",required:!0,type:"String"},uid:{field:"uid",label:"用户uid",required:!0,type:"Number"}},label:"提单人",pid:0,print:!0,required:!0,tip:"",type:"Object"},{component:"reimburseer",field:"reimburseer",id:222,items:{name:{field:"name",label:"用户名",required:!0,type:"String"},uid:{field:"uid",label:"用户uid",required:!0,type:"Number"}},label:"承担人",pid:0,print:!0,required:!0,type:"Object"},{component:"department",field:"department",id:444,items:{full_name:{field:"full_name",label:"部门全名",required:!0,type:"String"},id:{field:"id",label:"部门id",required:!0,type:"Number"},name:{field:"name",label:"部门名",required:!0,type:"String"}},label:"承担部门",pid:0,print:!0,required:!0,tip:"请选择",type:"Object"},{component:"title",field:"title",id:555,items:{id:{field:"id",label:"抬头id",required:!0,type:"Number"},name:{field:"name",label:"抬头名",required:!0,type:"String"}},label:"费用主体",print:!0,required:!0,tip:"请选择",type:"Object"},{component:"travel_type",field:"travel_type",id:1122,items:{},label:"出行类型",pid:0,print:!0,required:!0,tip:"请选择",type:"String"},{component:"summary",field:"summary",id:1133,items:{},label:"事由",length_limit:1024,pid:0,print:!0,required:!0,tip:"请输入事由",type:"String"},{component:"travel_list",field:"travel_list",id:1144,items:{trans_time:{field:"trans_time",items:{duration:{field:"duration",label:"时长",required:!0,type:"Number"},end_time:{field:"end_time",label:"行程结束时间",required:!0,type:"Number"},start_time:{field:"start_time",label:"行程开始时间",required:!0,type:"Number"}},label:"时长",type:"Object"}},label:"行程明细",pid:0,print:!0,required:!0,tip:"增加行程",type:"Array"},{component:"trans_list",date_type:"YY-MM-DD-hh-mm",field:"trans_list",id:11442,items:{end_point:{field:"end_point",label:"目的地点",required:!0,type:"String"},start_point:{field:"start_point",label:"开始地点",required:!0,type:"String"}},label:"行程明细-业务控件",pid:1144,print:!0,required:!0,type:"Array"},{component:"trans_way",field:"trans_way",id:11441,items:{},label:"出行方式",pid:1144,print:!0,required:!0,tip:"请选择",type:"String"},{component:"custom_attach",field:"custom_attach",id:1155,items:{attach_name:{field:"attach_name",type:"String"},attach_url:{field:"attach_url",type:"String"},size:{field:"size",type:"Number"},thumbnail_url:{field:"thumbnail_url",type:"String"}},label:"附件",max_filesize:0,pid:0,print:!1,required:!1,type:"Array"}]},V=[{field:"travel_way",id:1,label:"打车",value:"打车",order:0},{field:"travel_way",id:2,label:"飞机",value:"飞机",order:1},{field:"travel_way",id:3,label:"火车",value:"火车",order:2},{field:"travel_way",id:4,label:"轮船",value:"轮船",order:3},{field:"travel_way",id:5,label:"其他",value:"其他",order:4},{field:"travel_type",id:6,label:"外地出差",value:"外地出差",order:5},{field:"travel_type",id:7,label:"本地出差",value:"本地出差",order:6},{field:"custom_radio_1624083444530",id:1216,label:"1",value:"1624083550663",order:7},{field:"custom_radio_1624083444530",id:1217,label:"12",value:"1624083556389",order:8}];function Q(e,t){var a=b()(e);if(s()){var i=s()(e);t&&(i=i.filter((function(t){return c()(e,t).enumerable}))),a.push.apply(a,i)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){N()(e,t,a[t])})):m()?l()(e,m()(a)):Q(Object(a)).forEach((function(t){r()(e,t,c()(a,t))}))}return e}function H(e){var t=(0,C.useRef)(),a=(0,C.useState)({}),i=k()(a,2),r=i[0],n=i[1],l=(0,C.useState)(1),o=k()(l,2),m=o[0],d=(o[1],(0,C.useState)({})),c=k()(d,2),u=c[0],s=c[1],p=(0,C.useState)("mobile"),_=k()(p,2),y=_[0],g=(_[1],(0,C.useState)(null)),q=k()(g,2),N=q[0],x=q[1],S=(0,C.useState)(null),w=k()(S,2),I=w[0],Q=w[1],H=(0,C.useState)([]),G=k()(H,2),$=G[0],K=G[1],U=(0,C.useState)([]),W=k()(U,2),X=W[0],ee=W[1],te=(0,C.useState)([]),ae=k()(te,2),ie=ae[0],re=ae[1],ne=(0,C.useState)([]),le=k()(ne,2),oe=le[0],me=le[1],de=(0,C.useState)(!1),ce=k()(de,2),ue=ce[0],se=ce[1],pe=(0,C.useState)([]),fe=k()(pe,2),_e=fe[0],be=fe[1],ye=(0,C.useState)({}),ve=k()(ye,2),ge=(ve[0],ve[1],(0,C.useState)({})),he=k()(ge,2),qe=(he[0],he[1],(0,C.useState)([])),Ne=k()(qe,2);Ne[0],Ne[1],(0,C.useMemo)((function(){var e=(0,M.p$)(Z.Ct);n(e)}),[]),(0,C.useEffect)((function(){!function(e,t,a){var i=e.view,l=e.model.reduce((function(e,t){return e[t.id]=t,e[t.field]=t,e}),{}),o={},m=[],d=[],c=i.reduce((function(e,t){return t.children=[],e[t.id]=t,e}),{});console.log("optionsDataMapoptionsDataMap",t);for(var u=0;u<i.length;u++){var s=l[i[u].id]&&t[l[i[u].id].field],p=D()({},r[i[u].component],i[u],{form:D()({},r[i[u].component].form,l[i[u].id],s?{options:s.sort((function(e,t){return e.order-t.order}))}:{})});Z.Dn[p.name],"trans_list"===p.name&&(p.required_fixed=!0,p.print_fixed=!0),o[p.component]=o[p.component]?o[p.component]+1:1,c[p.pid]?(c[p.pid].children.push(p),c[p.pid].children=c[p.pid].children.sort((function(e,t){return e.order-t.order}))):l[p.id]&&"main"===l[p.id].belong?m.push(p):d.push(p)}K(m.sort((function(e,t){return e.order-t.order}))),ee(d.sort((function(e,t){return e.order-t.order}))),function(e){(function(e,t,a){for(var i=[],l=[],o=0;o<e.length;o++){var m=a[e[o].name],d=D()(r[e[o].name],e[o],{form:D()({},r[e[o].name].form,e[o].model,m?{options:m.sort((function(e,t){return e.order-t.order}))}:{})});delete d.id;var c="".concat(d.name,"_").concat(2),u=Z.YC[c];u&&(d=D()({},d,u,{form:D()(d.form,u.form)})),t[d.name]&&void 0!==d.count&&(d.count=t[d.name]),Z.Dn[d.name],"trans_list"===d.name&&(d.required_fixed=!0,d.print_fixed=!0),1===e[o].type?(delete d.form.field,i.push(d)):2!==e[o].type||Z.J4[d.name]||l.push(d)}n(r),re(i),me(l)})(J,e,V)}(o)}(L,V),be([])}),[]);var xe=function(){sessionStorage.setItem("echo_selected_custom_doc_tmpl",E()({type:2,currTab:"2"})),e.history.goBack()},Ee=function(){var e={custom_check_box:!0,custom_radio:!0,trans_way:!0,travel_type:!0};function t(a){a.forEach((function(a){if(a.children&&a.children.length>0&&t(a.children),e[a.name]&&a.form.options)if(0!==a.form.options.length&&a.form.options[0].hasOwnProperty("id"))if(a.form.options.some((function(e){return!e.label||!e.label.trim()})))u["".concat(a.name,"_").concat(a.id)]=!0;else{var i=a.form.options.map((function(e){return e.label}))||[];h()(new(v())(i)).length<a.form.options.length&&(u["".concat(a.name,"_").concat(a.id)]=!0)}else u["".concat(a.name,"_").concat(a.id)]=!0;"custom_detailed"!==a.name&&"custom_columns"!==a.name||a.children&&0!==a.children.length||(u["".concat(a.name,"_").concat(a.id)]=!0)}))}t($),t(X)},Se=function(e,t,a){var i;i=a||("1"===e?$:X);for(var r=0;r<i.length;r++){if(i[r].id===t)return[r];if(i[r].children)for(var n=0;n<i[r].children.length;n++)if(i[r].children[n].id===t)return[r,n]}return[]},De=function(e,t){if(N){var a=Se(t,N.id,e);Q(a.length>0?t:"1"===t?"2":"1")}},we=function(e){e&&(j.Z.destroyAll(),j.Z.error({title:"提示",content:e}));var t=JSON.parse(E()($)),a=JSON.parse(E()(X));setTimeout((function(){K(t),ee(a)}))};return C.createElement("div",{className:"custom-doc-tmpl-layout"},C.createElement("div",{className:"custom-doc-tmpl-header"},C.createElement("div",{className:"back"},C.createElement(z.Z,{style:{fontSize:"20px",cursor:"pointer"},onClick:xe,title:"返回"})," ",C.createElement("span",{className:"title"},"自定义模板")),C.createElement("div",{className:"layout-tab"},C.createElement("div",{className:B()({active:1===m})},"表单设计")),C.createElement("div",{className:"btn-bar"},C.createElement(A.Z,{type:"text",className:"btn",style:{width:"auto",padding:"4px 10px"},onClick:xe},"取消"),C.createElement(A.Z,{type:"primary",className:"btn",onClick:function(){se(!0),N?t.current.submit():Ee(),setTimeout((function(){var e=b()(u).length;if(e>0)return O.ZP.error("发现".concat(e,"个未完善的组件表单，请完善后提交")),void se(!1);!function(e){var t=[],a=[];function i(r,n,l){for(var o=1,m=0;m<r.length;m++)r[m].children&&i(r[m].children,r[m].id,l),t.push({id:r[m].id,pid:n,component:r[m].name,order:o++,type:r[m].type,fixed:r[m].fixed}),r[m].form.options&&delete r[m].form.options,a.push(R(R(R({},r[m].form),{}),{},{id:r[m].id,pid:n,component:r[m].name,field:1===r[m].type?r[m].form.field||"".concat(r[m].name,"_").concat(r[m].id):r[m].name,componentType:e?r[m].type:void 0}))}if(i(JSON.parse(E()($)),0,"main"),i(JSON.parse(E()(X)),0,"child"),console.log(E()({view:t,model:a})),console.log({view:t,model:a}),e)return{view:t,model:a};O.ZP.success("已保存")}()}),100)},loading:ue},"保存"))),C.createElement("div",{className:"custom-doc-tmpl"},C.createElement("div",{className:B()({"components-kit-view":!0,show:"mobile"===y})},C.createElement("p",{className:"list-group-title"},"基础控件"),C.createElement(T._O,{group:{name:"formItem",pull:"clone",put:!1},list:ie,setList:re,sort:!1,animation:0,filter:".disabled",className:"components-kit-list"},ie&&ie.map((function(e,t){return C.createElement("div",{className:B()({"components-kit-item":!0,basics:!0,disabled:e.count>=1}),key:t},C.createElement("img",{className:"icon-default",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/icon-default/".concat(e.name,".svg"),alt:""}),C.createElement("img",{className:"icon-hover",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/icon-hover/".concat(e.name,".svg"),alt:""}),e.title)}))),C.createElement("p",{className:"list-group-title"},"业务控件"),C.createElement(T._O,{group:{name:"formItem",pull:"clone",put:!1},list:oe,setList:me,sort:!1,animation:0,filter:".disabled",className:"components-kit-list"},oe&&oe.map((function(e,t){return C.createElement("div",{key:t,className:B()({"components-kit-item":!0,business:!0,disabled:e.count>=1})},C.createElement("p",{className:"main-title"},C.createElement("img",{className:"icon-default",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/icon-default/".concat(e.name,".svg"),alt:""}),C.createElement("img",{className:"icon-hover",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/custom-doc-tmpl/icon-hover/".concat(e.name,".svg"),alt:""}),e.title),C.createElement("p",{className:"desc"},e.desc),C.createElement("div",null))})))),C.createElement("div",{className:"container-view",onClick:function(){N&&(t.current.submit(),setTimeout((function(){x(null)})))}},C.createElement("div",{className:"container-view-main"},C.createElement("div",{className:"container-view-main"},C.createElement(F.default,{containerData:X,template_type:2,setList:function(e,t){for(var a=0;a<e.length;a++){var i=e[a].includedContainer;if(i&&i.container!==t)return void we(i.msg);if(i&&i.mustIn&&2===i.mustIn.template_type)return void we(i.mustIn.msg);e[a].id||(e[a].id=(new Date).getTime()),"travel_list"===e[a].name&&0===e[a].children.length&&(e[a].children=[R(R({},r.trans_way),{},{type:2,id:(new Date).getTime()+100,order:-2,fixed:!0,required_fixed:!0,print_fixed:!0}),R(R({},r.trans_list),{},{id:(new Date).getTime()+300,order:-1,type:2,fixed:!0,required_fixed:!0,print_fixed:!0})])}"1"===t?K(e):ee(e),De(e,t),function(e,t){for(var a=e.concat("1"===t?X:$),i={},n=0;n<a.length;n++)if(i[a[n].name]?i[a[n].name]+=1:i[a[n].name]=1,a[n].children)for(var l=0;l<a[n].children.length;l++)i[a[n].children[l].name]?i[a[n].children[l].name]+=1:i[a[n].children[l].name]=1;for(var o=function(e){if(Z.BV[e].filter((function(e){return i[e]})).length===Z.BV[e].length){var t=Z.BV[e].reduce((function(t,a,i){return t+"【".concat(r[a].title).concat(r[a].desc?"-".concat(r[a].desc):"","】").concat(i<Z.BV[e].length-1?"与":"")}),"");return we("".concat(t,"只能存在其中一个")),{v:void 0}}},m=0;m<Z.BV.length;m++){var d=o(m);if("object"===f()(d))return d.v}for(var c=0;c<oe.length;c++)i[oe[c].name]&&void 0!==oe[c].count&&(oe[c].count=i[oe[c].name]);me(oe);for(var u=0;u<ie.length;u++)i[ie[u].name]&&void 0!==ie[u].count&&(ie[u].count=i[ie[u].name]);re(ie)}(e,t)},updateContainerData:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,r=(a.exclude||[]).reduce((function(e,t){return e[t]=!0,e}),{}),n=a.children.reduce((function(e,t){return e[t.name]=!0,e}),{}),l=null,o=0;o<t.length;o++){var m=t[o].includedContainer,d=m&&m.container===i,c=d&&m.mustIn&&m.mustIn.c===a.name&&2===m.mustIn.template_type;if(r[t[o].name]&&!c)return void we("该组件不能添加到套件中");if(n[t[o].name]||(l=t[o].name),t[o].id||(t[o].id=(new Date).getTime()),d){if(m.mustIn&&m.mustIn.c!==a.name&&2===m.mustIn.template_type)return void we(m.mustIn.msg)}else if(m&&m.container!==i){if(!m.orIn)return void we(m.msg);if(a.name!==m.orIn)return void we(m.msg)}}var p=(e="1"===i?JSON.parse(E()($)):JSON.parse(E()(X))).find((function(e){return a.id===e.id}));p.children=t,u["".concat(p.name,"_").concat(p.id)]&&(delete u["".concat(p.name,"_").concat(p.id)],s(u));for(var f=0;f<oe.length;f++)if(oe[f].name===l&&void 0!==oe[f].count){oe[f].count+=1;break}me(oe);for(var _=0;_<ie.length;_++)if(ie[_].name===l&&void 0!==ie[_].count){ie[_].count+=1;break}re(ie),"1"===i?K(e):ee(e),De(e,i)},currentComponent:N,setCurrent:function(e,a){if(N){if(a.id===N.id)return;t.current.submit()}var i=JSON.parse(E()(a));setTimeout((function(){Q(e),x(i),t.current.setFieldsValue(i.form),t.current.validateFields()}))},deleteComponent:function(e,t){var a=Se(e,t),i=[];function r(e){return 1===a.length?i=e.splice(a[0],1):2===a.length&&(i=e[a[0]].children.splice(a[1],1)),JSON.parse(E()(e))}if(0!==a.length&&("1"===e?K(r($)):ee(r(X))),t===(N&&N.id)&&x(null),i.length>0){console.log(i);var n={};!function e(t){for(var a=0;a<t.length;a++){var i="".concat(t[a].name,"_").concat(t[a].id);n[i]=!0,n[t[a].name]=!0,u[i]&&delete u[i],t[a].children&&t[a].children.length>0&&e(t[a].children)}}(i),s(u);var l=function(e){for(var t=0;t<e.length;t++)n[e[t].name]&&void 0!==e[t].count&&e[t].count>0&&(e[t].count-=1);return e};me(l(oe)),re(l(ie))}},tab:"2",title:Z.gF[2].containerTitle,checkComponentForm:u,componentsNameMap:r})))),C.createElement("div",{className:"form-container-panel"},C.createElement(Y.I.Provider,{value:_e},C.createElement(P.default,{currentComponent:N,open:!!N,form_type:2,updateComponentForm:function(e){var a=Se(I,N.id);function i(t){var i=JSON.parse(E()(t));return 1===a.length?i[a[0]].form=D()(i[a[0]].form,e):2===a.length&&(i[a[0]].children[a[1]].form=D()(i[a[0]].children[a[1]].form,e)),i}t.current&&t.current.validateFields(),0!==a.length&&("1"===I?K(i($)):ee(i(X)))},formRef:t,template_type:2,onFormFinish:function(e){"success"===e?u["".concat(N.name,"_").concat(N.id)]&&delete u["".concat(N.name,"_").concat(N.id)]:u["".concat(N.name,"_").concat(N.id)]=!0,Ee(),s(u),console.log(u)}})))))}a(33648)}}]);