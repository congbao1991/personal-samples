(self.webpackChunkreact_webpack=self.webpackChunkreact_webpack||[]).push([[233],{24457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>K});var a=n(58548),r=n.n(a),o=n(78829),l=n.n(o),i=n(51765),c=n.n(i),s=n(93287),m=n.n(s),u=n(24309),d=n.n(u),p=n(33929),f=n.n(p),v=n(63497),h=n.n(v),y=n(69984),E=n.n(y),g=n(74720),b=n.n(g),N=n(9830),w=n.n(N),_=n(30695),C=n.n(_),k=n(83507),Z=n.n(k),S=n(69024),D=n.n(S),M=n(600),x=n.n(M),P=n(67294),R=n(49101),T=n(34046),O=n(34041),L=n(48086),V=n(14617),F=n(35018),B=n(71577),H=n(41584),A=n(88675),j=n(85907),W=n(23148),q=n(45724);function I(e,t){var n=f()(e);if(d()){var a=d()(e);t&&(a=a.filter((function(t){return m()(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):c()?l()(e,c()(n)):I(Object(n)).forEach((function(t){r()(e,t,m()(n,t))}))}return e}var G=O.Z.Option;const K=function(e){Z()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!h())return!1;if(h().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(h()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=x()(t);if(n){var r=x()(this).constructor;e=h()(a,arguments,r)}else e=a.apply(this,arguments);return D()(this,e)});function r(e){var t;w()(this,r),(t=a.call(this,e)).inputRef=(0,P.createRef)(),t.editMemberRef=P.createRef(),t.submit=function(){var e=t.state.config,n=e.user_type,a=e.users,r=e.roles,o=e.sign_method,l=void 0===o?2:o,i=e.leader_level,c=void 0===i?"1":i,s=e.root_level,m=void 0===s?"1":s,u=e.level_type,d=void 0===u?1:u,p=e.if_empty,f=void 0===p?1:p;if(a=a&&a.filter((function(e){return!e.leave})),n!==q.d||a&&0!=a.length)if(n!==q.MZ||r&&0!=r.length)if(n===q.MZ&&r.some((function(e){return e.is_empty})))L.ZP.warn("用户组为空，请添加用户组");else if(n===q.MZ&&r.some((function(e){return e.is_del})))L.ZP.warn("用户组为空，请添加用户组");else{var v={user_type:n};switch(n){case q.Dw:v.sign_method=l,v.level_num=c;break;case q.d:v.users=a,a.length>1&&(v.sign_method=l);break;case q.EN:v.level_type=d,v.sign_method=l,1==v.level_type?v.level_num=c:v.level_num=m;break;case q.MZ:v.sign_method=l,v.if_empty=f,v.roles=r.map((function(e){return{rid:e.role_id,rname:e.role_name}}))}t.state.approvalDrawerModel.node_value=b()(v),console.log("更新后的节点数据",t.state.approvalDrawerModel),t.props.onSubmit(t.state.approvalDrawerModel)}else L.ZP.warn("请选择指定用户组");else L.ZP.warn("请选择指定人员")},t.onRadioChange=function(e,n){t.state.config[n]=e.target.value,t.setState({config:t.state.config})},t.onCloseDrawer=function(){t.props.onCloseDrawer()},t.closeMember=function(){t.setState({memberSelectorVisible:!1})},t.showMemberSelector=function(){t.setState({memberSelectorVisible:!0}),t.editMemberRef.current.wrappedInstance.setCheck((t.state.config.users||[]).filter((function(e){return!e.leave})))},t.memberSelectorCallback=function(e){if(e.length>20)L.ZP.warn("最多可添加20个成员");else{var n=t.state.config;n.users=e.map((function(e){return{uid:e.id.toString(),uname:"string"==typeof e.name?e.name:e.name.props.children}})),t.setState({config:n,memberSelectorVisible:!1})}},t.onTitleChange=function(e){t.state.approvalDrawerModel.node_name=e.target.value,t.setState({approvalDrawerModel:t.state.approvalDrawerModel})},t.onSelectChange=function(e,n){t.state.config[n]=e,t.setState({config:t.state.config})},t.onTitleBlur=function(){t.setState({titleEditable:!1})},t.onTitleEdit=function(){t.setState({titleEditable:!0},(function(){t.inputRef.current.focus()}))},t.onDeleteMember=function(e){t.state.config.users.splice(e,1),t.setState({config:t.state.config})},t.onDeleteRole=function(e){t.state.config.roles.splice(e,1),t.setState({config:t.state.config})},t.showRoleSelector=function(){t.setState({roleSelectorVisible:!0})},t.onHideRolePicker=function(){t.setState({roleSelectorVisible:!1})},t.initData=function(){if(t.state.approvalDrawerModel.node_value){var e=JSON.parse(t.state.approvalDrawerModel.node_value);console.log("抽屉初始化数据",e),e.user_type===q.EN?1==e.level_type?e.leader_level=e.level_num:e.root_level=e.level_num:e.leader_level=e.level_num,e.user_type===q.MZ&&(e.roles=(e.roles||[]).map((function(e){return{role_id:e.rid,role_name:e.rname,is_empty:e.is_empty,is_del:e.is_del}}))),e.sign_method||(e.sign_method=2),t.setState({config:e})}};var n=(0,H.p$)(t.props.drawerData);return t.state={approvalDrawerModel:n,titleEditable:!1,memberSelectorVisible:!1,config:{},treeData:[],roleData:[],roleSelectorVisible:!1},t}return C()(r,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.approvalDrawerModel,a=t.titleEditable,r=t.config,o=(t.memberSelectorVisible,t.treeData,t.roleSelectorVisible,[]);return r.roles&&(o=r.roles.map((function(e){return z(z({},e),{},{key:e.role_id,title:e.role_name,uname:e.role_name})}))),P.createElement("div",{style:{height:"100vh",position:"relative"}},P.createElement("div",{className:"drawer-header"},P.createElement(T.Z,{visible:!a},P.createElement("span",{className:"edit-title"},n.node_name),P.createElement("span",{className:"edit-icon",onClick:this.onTitleEdit,style:{marginLeft:10}})),P.createElement(T.Z,{visible:a},P.createElement(V.Z,{maxLength:20,value:n.node_name,ref:this.inputRef,onChange:this.onTitleChange,onBlur:this.onTitleBlur,style:{width:300}}))),P.createElement("div",{className:"drawer-content-wrapper"},P.createElement("h1",{className:"drawer-title"},"设置审批人"),P.createElement(F.ZP.Group,{name:"radiogroup",className:"approval-type-radio-group",onChange:function(t){e.onRadioChange(t,"user_type")},value:r.user_type},P.createElement(F.ZP,{className:"approval-type-radio",value:q.Dw},"指定主管"),P.createElement(F.ZP,{className:"approval-type-radio",value:q.d},"指定成员"),P.createElement(F.ZP,{className:"approval-type-radio",value:q.EN},"连续多级主管",P.createElement(A.Z,null,"发起人向上的各级主管依次审批")),P.createElement(F.ZP,{className:"approval-type-radio",value:q.MZ},"指定用户组",P.createElement(W.default,null))),P.createElement(T.Z,{visible:r.user_type==q.Dw},P.createElement("div",null,P.createElement("span",{style:{marginRight:14}},"发起人的"),P.createElement(O.Z,{className:"approval-level-select",onChange:function(t){e.onSelectChange(t,"leader_level")},value:r.leader_level||"1"},q.w9.map((function(e){return P.createElement(G,{value:e.value,key:e.value},e.label)}))))),P.createElement(T.Z,{visible:r.user_type==q.d},P.createElement("h1",{className:"drawer-title"},"添加成员：",P.createElement("span",{className:"sub-title"},"（不超过20个）")),P.createElement(T.Z,{visible:r.users&&r.users.length>0},P.createElement(j.default,{showSelector:this.showMemberSelector,onDelete:this.onDeleteMember,members:r.users})),P.createElement(B.Z,{onClick:this.showMemberSelector,type:"primary",className:"drawer-add-member"},P.createElement(R.Z,{className:"drawer-add-member-icon"})," 添加指定成员")),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title"},"添加用户组：",P.createElement("span",{className:"sub-title"},"（单选）")),P.createElement(T.Z,{visible:r.roles&&r.roles.length>0},P.createElement(j.default,{showSelector:this.showRoleSelector,onDelete:this.onDeleteRole,members:o})),P.createElement(B.Z,{onClick:this.showRoleSelector,type:"primary",className:"drawer-add-member"},P.createElement(R.Z,{className:"drawer-add-member-icon"})," 添加用户组")),P.createElement(T.Z,{visible:r.user_type==q.EN},P.createElement("h1",{className:"drawer-title"},"根据申请人执行依次向上审批："),P.createElement(F.ZP.Group,{name:"approve",value:r.level_type||1,onChange:function(t){e.onRadioChange(t,"level_type")}},P.createElement("div",{style:{marginBottom:16}},P.createElement(F.ZP,{value:1},P.createElement("span",{className:"text-split"},"直到发起人向上的")),P.createElement(O.Z,{className:"approval-level-select",onChange:function(t){e.onSelectChange(t,"leader_level")},value:r.leader_level||"1"},q.w9.map((function(e){return P.createElement(G,{value:e.value,key:e.value},e.label)})))),P.createElement("div",null,P.createElement(F.ZP,{value:2},P.createElement("span",{className:"text-split"},"直到通讯录中")),P.createElement(O.Z,{className:"approval-level-select",onChange:function(t){e.onSelectChange(t,"root_level")},value:r.root_level||"1"},q.LI.map((function(e){return P.createElement(G,{value:e.value,key:e.value},e.label)})))))),P.createElement(T.Z,{visible:q.EZ.includes(r.user_type)||r.user_type==q.d&&r.users&&r.users.length>1},P.createElement("h1",{className:"drawer-title approval-type-title"},"多人审批时采用的审批方式："),P.createElement(F.ZP.Group,{name:"radiogroup",onChange:function(t){e.onRadioChange(t,"sign_method")},value:r.sign_method||2},P.createElement(F.ZP,{style:{marginBottom:10},value:2},"或签（一名审批人同意或拒绝即可）"),P.createElement("br",null),P.createElement(F.ZP,{value:1},"会签（须所有审批人同意）"))),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title approval-type-title"},"审批人为空时候："),P.createElement(F.ZP.Group,{name:"radiogroup",onChange:function(t){e.onRadioChange(t,"if_empty")},value:(0,H.xb)(r.if_empty)?1:r.if_empty},P.createElement(F.ZP,{style:{marginBottom:10},value:2},"自动通过",P.createElement(A.Z,null,"当该用户组或主管没有人的时候，审批单将自动通过")),P.createElement("br",null),P.createElement(F.ZP,{value:1},"自动转交管理员",P.createElement(A.Z,null,"当用户组或主管为空时，审批单会自动转交给超级管理员"))))),P.createElement("div",{className:"button-bar"},P.createElement(B.Z,{type:"primary",onClick:function(){e.submit()}},"确定"),P.createElement(B.Z,{onClick:this.onCloseDrawer},"取消")))}}]),r}(P.Component)},40663:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var a=n(58548),r=n.n(a),o=n(78829),l=n.n(o),i=n(51765),c=n.n(i),s=n(93287),m=n.n(s),u=n(24309),d=n.n(u),p=n(33929),f=n.n(p),v=n(63497),h=n.n(v),y=n(69984),E=n.n(y),g=n(74720),b=n.n(g),N=n(9830),w=n.n(N),_=n(30695),C=n.n(_),k=n(83507),Z=n.n(k),S=n(69024),D=n.n(S),M=n(600),x=n.n(M),P=n(67294),R=n(41584),T=n(34046),O=n(48086),L=n(14617),V=n(35018),F=n(9676),B=n(71577),H=n(49101),A=n(88675),j=n(85907),W=n(23148),q=n(45724);function I(e,t){var n=f()(e);if(d()){var a=d()(e);t&&(a=a.filter((function(t){return m()(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):c()?l()(e,c()(n)):I(Object(n)).forEach((function(t){r()(e,t,m()(n,t))}))}return e}var G=function(e){Z()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!h())return!1;if(h().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(h()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=x()(t);if(n){var r=x()(this).constructor;e=h()(a,arguments,r)}else e=a.apply(this,arguments);return D()(this,e)});function r(e){var t;return w()(this,r),(t=a.call(this,e)).inputRef=(0,P.createRef)(),t.editMemberRef=(0,P.createRef)(),t.submit=function(){var e=t.state.config,n=e.user_type,a=e.sign_method,r=void 0===a?2:a,o=e.roles,l=e.if_empty,i=void 0===l?1:l,c=t.state.users;if(c=c&&c.filter((function(e){return!e.leave})),3!==n||c&&0!=c.length)if(n!==q.MZ||o&&0!=o.length)if(n===q.MZ&&o.some((function(e){return e.is_empty})))O.ZP.warn("用户组为空，请添加用户组");else if(n===q.MZ&&o.some((function(e){return e.is_del})))O.ZP.warn("用户组为空，请添加用户组");else{var s={};switch(n){case 1:if(t.state.checkedList.length==t.state.financialMembers.length)s.user_type=1,s.sign_method=r;else{var m=t.state.financialMembers.filter((function(e){return t.state.checkedList.some((function(t){return t==e.uid&&!e.leave}))}));if(0==m.length)return void O.ZP.warn("请选择指定审单会计");1==m.length?s.sign_method=2:s.sign_method=r,s.users=m,s.user_type=2}break;case 3:s.users=c,s.user_type=3,1==c.length?s.sign_method=2:s.sign_method=r;break;case q.MZ:s.user_type=q.MZ,s.sign_method=r,s.if_empty=i,s.roles=o.map((function(e){return{rid:e.role_id,rname:e.role_name}}))}t.state.drawerModel.node_value=b()(s),console.log("更新后的节点数据",t.state.drawerModel),t.props.onSubmit(t.state.drawerModel)}else O.ZP.warn("请选择指定用户组");else O.ZP.warn("请选择指定人员")},t.onTitleBlur=function(){t.setState({titleEditable:!1})},t.onRadioChange=function(e,n){var a=t.state.checkedList;1==e.target.value&&"user_type"==n&&(a=t.state.financialMembers.map((function(e){return e.uid}))),t.state.config[n]=e.target.value,t.setState({config:t.state.config,checkedList:a})},t.onTitleEdit=function(){t.setState({titleEditable:!0},(function(){t.inputRef.current.focus()}))},t.onCloseDrawer=function(){t.props.onCloseDrawer()},t.onTitleChange=function(e){t.state.drawerModel.node_name=e.target.value,t.setState({drawerModel:t.state.drawerModel})},t.showMemberSelector=function(){t.setState({memberSelectorVisible:!0}),t.editMemberRef.current.wrappedInstance.setCheck((t.state.users||[]).filter((function(e){return!e.leave})))},t.onDeleteMember=function(e){t.state.users.splice(e,1),t.setState({users:t.state.users})},t.closeMember=function(){t.setState({memberSelectorVisible:!1})},t.onCheckboxGroupChange=function(e){t.setState({checkedList:e})},t.memberSelectorCallback=function(e){var n=t.state.users;e.length>20?O.ZP.warn("最多可添加20个成员"):(n=e.map((function(e){return{uid:e.id.toString(),uname:"string"==typeof e.name?e.name:e.name.props.children}})),t.setState({users:n,memberSelectorVisible:!1}))},t.onDeleteRole=function(e){t.state.config.roles.splice(e,1),t.setState({config:t.state.config})},t.showRoleSelector=function(){t.setState({roleSelectorVisible:!0})},t.onHideRolePicker=function(){t.setState({roleSelectorVisible:!1})},t.initData=function(){},t.state={drawerModel:(0,R.p$)(t.props.drawerData),titleEditable:!1,treeData:[],config:{},financialMembers:[],memberSelectorVisible:!1,checkedList:[],roleData:[],roleSelectorVisible:!1},t}return C()(r,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.titleEditable,a=t.drawerModel,r=t.config,o=t.financialMembers,l=(t.treeData,t.memberSelectorVisible,t.checkedList),i=t.users,c=(t.roleSelectorVisible,[]);return r.roles&&(c=r.roles.map((function(e){return z(z({},e),{},{key:e.role_id,title:e.role_name,uname:e.role_name})}))),P.createElement("div",{style:{height:"100vh",position:"relative"}},P.createElement("div",{className:"drawer-header"},P.createElement(T.Z,{visible:!n},P.createElement("span",{className:"edit-title"},a.node_name),P.createElement("span",{className:"edit-icon",onClick:this.onTitleEdit,style:{marginLeft:10}})),P.createElement(T.Z,{visible:n},P.createElement(L.Z,{maxLength:20,value:a.node_name,ref:this.inputRef,onChange:this.onTitleChange,onBlur:this.onTitleBlur,style:{width:300}}))),P.createElement("div",{className:"drawer-content-wrapper"},P.createElement("h1",{className:"drawer-title"},"设置审核人"),P.createElement(V.ZP.Group,{name:"radiogroup",className:"approval-type-radio-group",onChange:function(t){e.onRadioChange(t,"user_type")},value:r.user_type},P.createElement(V.ZP,{className:"approval-type-radio",value:1},"全部审单会计"),P.createElement(V.ZP,{className:"approval-type-radio",value:3},"指定成员"),P.createElement(V.ZP,{className:"approval-type-radio",value:q.MZ},"指定用户组",P.createElement(W.default,null))),P.createElement(T.Z,{visible:1==r.user_type&&o&&0==o.length},P.createElement("div",{className:"setting-member-tips"},P.createElement("span",{className:"icon"}),P.createElement("span",{className:"text"},"未设置财务权限人员，请先前往"),P.createElement("span",{className:"highlight-text"},"【企业设置-权限管理】"),P.createElement("span",{className:"text"},"中设置"))),P.createElement(T.Z,{visible:1==r.user_type&&o&&o.length>0},P.createElement("div",null,P.createElement(F.Z.Group,{onChange:this.onCheckboxGroupChange,defaultValue:l},o.map((function(e){return P.createElement(F.Z,{value:e.uid,key:e.uid,className:e.leave?"quit":""},e.uname+(e.leave?"(已离职)":""))}))))),P.createElement(T.Z,{visible:3==r.user_type},P.createElement("h1",{className:"drawer-title"},"添加成员：",P.createElement("span",{className:"sub-title"},"（不超过20个）")),P.createElement(T.Z,{visible:i&&i.length>0},P.createElement(j.default,{showSelector:this.showMemberSelector,onDelete:this.onDeleteMember,members:i})),P.createElement(B.Z,{onClick:this.showMemberSelector,type:"primary",className:"drawer-add-member"},P.createElement(H.Z,{className:"drawer-add-member-icon"})," 添加指定成员")),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title"},"添加用户组：",P.createElement("span",{className:"sub-title"},"（单选）")),P.createElement(T.Z,{visible:r.roles&&r.roles.length>0},P.createElement(j.default,{showSelector:this.showRoleSelector,onDelete:this.onDeleteRole,members:c})),P.createElement(B.Z,{onClick:this.showRoleSelector,type:"primary",className:"drawer-add-member"},P.createElement(H.Z,{className:"drawer-add-member-icon"})," 添加用户组")),P.createElement(T.Z,{visible:r.user_type===q.MZ||1==r.user_type&&l.length>1||3==r.user_type&&i&&i.length>1},P.createElement("h1",{className:"drawer-title approval-type-title"},"多人审批时采用的审批方式"),P.createElement(V.ZP.Group,{name:"radiogroup",onChange:function(t){e.onRadioChange(t,"sign_method")},value:r.sign_method||2},P.createElement(V.ZP,{style:{marginBottom:10},value:2},"或签（一名审批人同意或拒绝即可）"),P.createElement("br",null),P.createElement(V.ZP,{value:1},"会签（须所有审批人同意）"))),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title approval-type-title"},"审批人为空时候："),P.createElement(V.ZP.Group,{name:"radiogroup",onChange:function(t){e.onRadioChange(t,"if_empty")},value:(0,R.xb)(r.if_empty)?1:r.if_empty},P.createElement(V.ZP,{style:{marginBottom:10},value:2},"自动通过",P.createElement(A.Z,null,"当该用户组或主管没有人的时候，审批单将自动通过")),P.createElement("br",null),P.createElement(V.ZP,{value:1},"自动转交管理员",P.createElement(A.Z,null,"当用户组或主管为空时，审批单会自动转交给超级管理员"))))),P.createElement("div",{className:"button-bar"},P.createElement(B.Z,{type:"primary",onClick:function(){e.submit()}},"确定"),P.createElement(B.Z,{onClick:this.onCloseDrawer},"取消")))}}]),r}(P.Component)},85907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var a,r=n(63497),o=n.n(r),l=n(9830),i=n.n(l),c=n(30695),s=n.n(c),m=n(83507),u=n.n(m),d=n(69024),p=n.n(d),f=n(600),v=n.n(f),h=n(67294),y=n(57016),E=n(71577),g=n(31097);var b=(0,n(16550).EN)(a=function(e){u()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!o())return!1;if(o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(o()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=v()(t);if(n){var r=v()(this).constructor;e=o()(a,arguments,r)}else e=a.apply(this,arguments);return p()(this,e)});function r(){var e;i()(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).onDelete=function(t,n){t&&t.stopPropagation(),e.props.onDelete(n)},e.linkRolePage=function(t){t.preventDefault(),t.stopPropagation(),y.Z.confirm({title:"提示",content:"设置用户组不会保存当前审批流，确认要去设置用户组吗",cancelText:"取消",okText:"去设置",zIndex:2e3,onOk:function(){e.props.history.replace("/company/roles/index")}})},e.generateMemberEl=function(t,n){if(t.is_empty){var a=h.createElement("div",null,"该用户组下没有成员,",h.createElement(E.Z,{style:{padding:0},type:"link",onClick:e.linkRolePage},"前往设置"));return h.createElement(g.Z,{key:n,placement:"top",title:a},h.createElement("div",{className:"member-box quit"},h.createElement("span",{className:"img-box"},t.uname.substr(0,1)),h.createElement("span",{className:"member-name"},"".concat(t.uname).concat(t.leave?"(已离职)":"").concat(t.is_del?"(已删除)":"")),h.createElement("span",{className:"member-tip-icon"},h.createElement("img",{src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/common/%21.png",alt:""})),h.createElement("i",{className:"member-delete",onClick:function(t){e.onDelete(t,n)}})))}return h.createElement("div",{key:n,className:"member-box ".concat(t.leave||t.is_del?"quit":"")},h.createElement("span",{className:"img-box"},t.uname.substr(0,1)),h.createElement("span",{className:"member-name"},"".concat(t.uname).concat(t.leave?"(已离职)":"").concat(t.is_del?"(已删除)":"")),h.createElement("i",{className:"member-delete",onClick:function(t){e.onDelete(t,n)}}))},e}return s()(r,[{key:"render",value:function(){var e=this,t=this.props.members;return h.createElement("div",{className:"selected-member-wrapper",onClick:function(){e.props.showSelector&&e.props.showSelector()}},t.map((function(t,n){return e.generateMemberEl(t,n)})))}}]),r}(h.Component))||a},75238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var a=n(63497),r=n.n(a),o=n(74720),l=n.n(o),i=n(9830),c=n.n(i),s=n(30695),m=n.n(s),u=n(83507),d=n.n(u),p=n(69024),f=n.n(p),v=n(600),h=n.n(v),y=n(67294),E=n(41584),g=n(34046),b=n(34041),N=n(48086),w=n(14617),_=n(71577),C=n(85907),k=n(49101),Z=n(45724);var S=b.Z.Option,D=function(e){d()(o,e);var t,n,a=(t=o,n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=h()(t);if(n){var o=h()(this).constructor;e=r()(a,arguments,o)}else e=a.apply(this,arguments);return f()(this,e)});function o(e){var t;return c()(this,o),(t=a.call(this,e)).inputRef=(0,y.createRef)(),t.editMemberRef=(0,y.createRef)(),t.submit=function(){var e=t.state.config,n=e.cc_superiors,a=e.users;if(a=a.filter((function(e){return!e.leave})),n&&0!=n.length||a&&0!=a.length){var r={};a&&a.length>0&&(r.users=a),n&&n.length>0&&(r.level_num=n.map((function(e){return e.level_num})).join(",")),t.state.drawerModel.node_value=l()(r),console.log("更新后的节点数据",t.state.drawerModel),t.props.onSubmit(t.state.drawerModel)}else N.ZP.warn("请选择指定成员或者添加指定上级")},t.onTitleBlur=function(){t.setState({titleEditable:!1})},t.onTitleEdit=function(){t.setState({titleEditable:!0},(function(){t.inputRef.current.focus()}))},t.onCloseDrawer=function(){t.props.onCloseDrawer()},t.closeMember=function(){t.setState({memberSelectorVisible:!1})},t.memberSelectorCallback=function(e){var n=t.state.config;e.length>20?N.ZP.warn("最多可添加20个成员"):(n.users=e.map((function(e){return{type:e.type,uid:e.id.toString(),uname:"string"==typeof e.name?e.name:e.name.props.children}})),t.setState({config:n,memberSelectorVisible:!1}))},t.onTitleChange=function(e){t.state.drawerModel.node_name=e.target.value,t.setState({drawerModel:t.state.drawerModel})},t.showMemberSelector=function(){t.setState({memberSelectorVisible:!0}),t.editMemberRef.current.wrappedInstance.setCheck((t.state.config.users||[]).filter((function(e){return!e.leave})))},t.addSuperior=function(){var e=t.state.config.cc_superiors,n=void 0===e?[]:e;n.push({level_num:"1"}),t.state.config.cc_superiors=n,t.setState({config:t.state.config})},t.onSuperiorTypeChange=function(e,n){var a=t.state.config.cc_superiors,r=void 0===a?[]:a;r[n].level_num=e,t.state.config.cc_superiors=r,t.setState({config:t.state.config})},t.deleteCondition=function(e){var n=t.state.config.cc_superiors,a=void 0===n?[]:n;a.splice(e,1),t.state.config.cc_superiors=a,t.setState({config:t.state.config})},t.onDeleteMember=function(e){t.state.config.users.splice(e,1),t.setState({config:t.state.config})},t.initData=function(){if(t.state.drawerModel.node_value){var e=JSON.parse(t.state.drawerModel.node_value);if(console.log("初始化抽屉数据",e),e.level_num){var n=e.level_num.split(","),a=[];n.forEach((function(e){a.push({level_num:e})})),e.cc_superiors=a}t.setState({config:e})}},t.state={drawerModel:(0,E.p$)(t.props.drawerData),titleEditable:!1,treeData:[],config:{}},t}return m()(o,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.titleEditable,a=t.drawerModel,r=(t.treeData,t.memberSelectorVisible,t.config);return y.createElement("div",{style:{height:"100vh",position:"relative"}},y.createElement("div",{className:"drawer-header"},y.createElement(g.Z,{visible:!n},y.createElement("span",{className:"edit-title"},a.node_name),y.createElement("span",{className:"edit-icon",onClick:this.onTitleEdit,style:{marginLeft:10}})),y.createElement(g.Z,{visible:n},y.createElement(w.Z,{maxLength:20,value:a.node_name,ref:this.inputRef,onChange:this.onTitleChange,onBlur:this.onTitleBlur,style:{width:300}}))),y.createElement("div",{className:"drawer-content-wrapper"},y.createElement("h1",{className:"drawer-title"},"指定成员：",y.createElement("span",{className:"sub-title"},"（可抄送成员）")),y.createElement(g.Z,{visible:r.users&&r.users.length>0},y.createElement(C.default,{showSelector:this.showMemberSelector,onDelete:this.onDeleteMember,members:r.users})),y.createElement(_.Z,{onClick:this.showMemberSelector,type:"primary",className:"drawer-add-notify-member"},y.createElement(k.Z,{className:"drawer-add-member-icon"})," 添加"),y.createElement("h1",{className:"drawer-title"},"指定上级：",y.createElement("span",{className:"sub-title"},"（可抄送指定层级上单）")),r.cc_superiors&&r.cc_superiors.map((function(t,n){return y.createElement("div",{key:n,className:"notify-drawer-appoint-superiors"},y.createElement(b.Z,{value:t.level_num||"1",onChange:function(t){e.onSuperiorTypeChange(t,n)}},Z.w9.map((function(e){return y.createElement(S,{key:e.value,value:e.value},e.label)}))),y.createElement("span",{className:"condition-edit-close",onClick:function(){e.deleteCondition(n)}}))})),y.createElement(_.Z,{onClick:this.addSuperior,type:"primary",className:"drawer-add-notify-condition"},y.createElement(k.Z,null)," 添加上级")),y.createElement("div",{className:"button-bar"},y.createElement(_.Z,{type:"primary",onClick:function(){e.submit()}},"确定"),y.createElement(_.Z,{onClick:this.onCloseDrawer},"取消")))}}]),o}(y.Component)},29396:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var a=n(58548),r=n.n(a),o=n(78829),l=n.n(o),i=n(51765),c=n.n(i),s=n(93287),m=n.n(s),u=n(24309),d=n.n(u),p=n(33929),f=n.n(p),v=n(63497),h=n.n(v),y=n(69984),E=n.n(y),g=n(74720),b=n.n(g),N=n(9830),w=n.n(N),_=n(30695),C=n.n(_),k=n(83507),Z=n.n(k),S=n(69024),D=n.n(S),M=n(600),x=n.n(M),P=n(67294),R=n(41584),T=n(34046),O=n(48086),L=n(14617),V=n(35018),F=n(9676),B=n(71577),H=n(49101),A=n(88675),j=n(23148),W=n(85907),q=n(45724);function I(e,t){var n=f()(e);if(d()){var a=d()(e);t&&(a=a.filter((function(t){return m()(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):c()?l()(e,c()(n)):I(Object(n)).forEach((function(t){r()(e,t,m()(n,t))}))}return e}var G=function(e){Z()(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!h())return!1;if(h().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(h()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=x()(t);if(n){var r=x()(this).constructor;e=h()(a,arguments,r)}else e=a.apply(this,arguments);return D()(this,e)});function r(e){var t;return w()(this,r),(t=a.call(this,e)).inputRef=(0,P.createRef)(),t.editMemberRef=(0,P.createRef)(),t.submit=function(){var e=t.state.config,n=e.user_type,a=e.roles,r=e.if_empty,o=t.state.users;if(o=o&&o.filter((function(e){return!e.leave})),3!==n||o&&0!=o.length)if(n!==q.MZ||a&&0!=a.length)if(n===q.MZ&&a.some((function(e){return e.is_empty})))O.ZP.warn("用户组为空，请添加用户组");else if(n===q.MZ&&a.some((function(e){return e.is_del})))O.ZP.warn("用户组为空，请添加用户组");else{var l={};switch(n){case 1:if(t.state.checkedList.length==t.state.paymentMembers.length)l.users=null,l.user_type=1;else{var i=t.state.paymentMembers.filter((function(e){return t.state.checkedList.some((function(t){return t==e.uid&&!e.leave}))}));if(0==i.length)return void O.ZP.warn("请选择指定审核人");l.users=i,l.user_type=2}break;case 3:l.users=o,l.user_type=3;break;case q.MZ:l.user_type=q.MZ,l.if_empty=r,l.roles=a.map((function(e){return{rid:e.role_id,rname:e.role_name}}))}l.pay_status=t.state.config.pay_status,t.state.drawerModel.node_value=b()(l),console.log("更新后的节点数据",t.state.drawerModel),t.props.onSubmit(t.state.drawerModel)}else O.ZP.warn("请选择指定用户组");else O.ZP.warn("请选择指定人员")},t.onTitleBlur=function(){t.setState({titleEditable:!1})},t.onRadioChange=function(e,n){var a=[];1==e.target.value&&(a=t.state.paymentMembers.map((function(e){return e.uid}))),t.state.config[n]=e.target.value,t.setState({config:t.state.config,checkedList:a})},t.onTitleEdit=function(){t.setState({titleEditable:!0},(function(){t.inputRef.current.focus()}))},t.onCloseDrawer=function(){t.props.onCloseDrawer()},t.onTitleChange=function(e){t.state.drawerModel.node_name=e.target.value,t.setState({drawerModel:t.state.drawerModel})},t.showMemberSelector=function(){t.setState({memberSelectorVisible:!0}),t.editMemberRef.current.wrappedInstance.setCheck((t.state.users||[]).filter((function(e){return!e.leave})))},t.onDeleteMember=function(e){t.state.users.splice(e,1),t.setState({users:t.state.users})},t.closeMember=function(){t.setState({memberSelectorVisible:!1})},t.onCheckboxGroupChange=function(e){t.setState({checkedList:e})},t.memberSelectorCallback=function(e){var n=t.state.users;e.length>20?O.ZP.warn("最多可添加20个成员"):(n=e.map((function(e){return{uid:e.id.toString(),uname:"string"==typeof e.name?e.name:e.name.props.children}})),t.setState({users:n,memberSelectorVisible:!1}))},t.onDeleteRole=function(e){t.state.config.roles.splice(e,1),t.setState({config:t.state.config})},t.showRoleSelector=function(){t.setState({roleSelectorVisible:!0})},t.onHideRolePicker=function(){t.setState({roleSelectorVisible:!1})},t.initData=function(){},t.state={drawerModel:(0,R.p$)(t.props.drawerData),titleEditable:!1,config:{},paymentMembers:[],treeData:[],memberSelectorVisible:!1,checkedList:[],users:[],roleData:[],roleSelectorVisible:!1},t}return C()(r,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.titleEditable,a=t.drawerModel,r=t.config,o=t.paymentMembers,l=(t.treeData,t.memberSelectorVisible,t.checkedList),i=t.users,c=(t.roleSelectorVisible,[]);return r.roles&&(c=r.roles.map((function(e){return z(z({},e),{},{key:e.role_id,title:e.role_name,uname:e.role_name})}))),P.createElement("div",{style:{height:"100vh",position:"relative"}},P.createElement("div",{className:"drawer-header"},P.createElement(T.Z,{visible:!n},P.createElement("span",{className:"edit-title"},a.node_name),P.createElement("span",{className:"edit-icon",onClick:this.onTitleEdit,style:{marginLeft:10}})),P.createElement(T.Z,{visible:n},P.createElement(L.Z,{maxLength:20,value:a.node_name,ref:this.inputRef,onChange:this.onTitleChange,onBlur:this.onTitleBlur,style:{width:300}}))),P.createElement("div",{className:"drawer-content-wrapper"},P.createElement("h1",{className:"drawer-title"},"设置审核人"),P.createElement(V.ZP.Group,{name:"radiogroup",className:"approval-type-radio-group",onChange:function(t){e.onRadioChange(t,"user_type")},value:r.user_type},P.createElement(V.ZP,{className:"approval-type-radio",value:1},"全部出纳人员"),P.createElement(V.ZP,{className:"approval-type-radio",value:3},"指定成员"),P.createElement(V.ZP,{className:"approval-type-radio",value:q.MZ},"指定用户组",P.createElement(j.default,null))),P.createElement(T.Z,{visible:1==r.user_type&&o&&0==o.length},P.createElement("div",{className:"setting-member-tips"},P.createElement("span",{className:"icon"}),P.createElement("span",{className:"text"},"未设置出纳权限人员，请先前往"),P.createElement("span",{className:"highlight-text"},"【企业设置-权限管理】"),P.createElement("span",{className:"text"},"中设置"))),P.createElement(T.Z,{visible:1==r.user_type&&o&&o.length>0},P.createElement("div",null,P.createElement(F.Z.Group,{onChange:this.onCheckboxGroupChange,value:l},o.map((function(e){return P.createElement(F.Z,{value:e.uid,key:e.uid,className:e.leave?"quit":""},e.uname+(e.leave?"(已离职)":""))}))))),P.createElement(T.Z,{visible:3==r.user_type},P.createElement("h1",{className:"drawer-title"},"添加成员：",P.createElement("span",{className:"sub-title"},"（不超过20个）")),P.createElement(T.Z,{visible:i&&i.length>0},P.createElement(W.default,{showSelector:this.showMemberSelector,onDelete:this.onDeleteMember,members:i})),P.createElement(B.Z,{onClick:this.showMemberSelector,type:"primary",className:"drawer-add-member"},P.createElement(H.Z,{className:"drawer-add-member-icon"})," 添加指定成员")),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title"},"添加用户组：",P.createElement("span",{className:"sub-title"},"（单选）")),P.createElement(T.Z,{visible:r.roles&&r.roles.length>0},P.createElement(W.default,{showSelector:this.showRoleSelector,onDelete:this.onDeleteRole,members:c})),P.createElement(B.Z,{onClick:this.showRoleSelector,type:"primary",className:"drawer-add-member"},P.createElement(H.Z,{className:"drawer-add-member-icon"})," 添加用户组")),P.createElement(T.Z,{visible:r.user_type==q.MZ},P.createElement("h1",{className:"drawer-title approval-type-title"},"审批人为空时候："),P.createElement(V.ZP.Group,{name:"radiogroup",onChange:function(t){e.onRadioChange(t,"if_empty")},value:(0,R.xb)(r.if_empty)?1:r.if_empty},P.createElement(V.ZP,{value:1},"自动转交管理员",P.createElement(A.Z,null,"当用户组或主管为空时，审批单会自动转交给超级管理员"))))),P.createElement("div",{className:"button-bar"},P.createElement(B.Z,{type:"primary",onClick:function(){e.submit()}},"确定"),P.createElement(B.Z,{onClick:this.onCloseDrawer},"取消")))}}]),r}(P.Component)},23148:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var a=n(63497),r=n.n(a),o=n(9830),l=n.n(o),i=n(30695),c=n.n(i),s=n(83507),m=n.n(s),u=n(69024),d=n.n(u),p=n(600),f=n.n(p),v=n(67294),h=n(57016),y=n(71577),E=n(16550),g=n(71649),b=n.n(g),N=n(11845),w=n.n(N),_=n(19181),C=n(80411),k=n.n(C);var Z,S=function(e){m()(o,e);var t,n,a=(t=o,n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var o=f()(this).constructor;e=r()(a,arguments,o)}else e=a.apply(this,arguments);return d()(this,e)});function o(){return l()(this,o),a.apply(this,arguments)}return c()(o,[{key:"render",value:function(){var e=this.props,t=(e.content,e.minHgWid),n=void 0===t?20:t,a=e.children,r=e.bgOpacity,o=void 0!==r&&r,l=w()(e,["content","minHgWid","children","bgOpacity"]),i=v.createElement("div",{className:"hover-tips-content"},a);return v.createElement(_.Z,b()({content:i,className:"hover-tips-popover"},l),v.createElement("div",{id:"hover-popover",className:k()({"bg-opacity":o}),style:{minHeight:n,minWidth:n}}))}}]),o}(v.Component);const D=(0,E.EN)(Z=function(e){m()(o,e);var t,n,a=(t=o,n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=f()(t);if(n){var o=f()(this).constructor;e=r()(a,arguments,o)}else e=a.apply(this,arguments);return d()(this,e)});function o(){var e;l()(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).linkRolePage=function(){h.Z.confirm({title:"提示",content:"设置用户组不会保存当前审批流，确认要去设置用户组吗",cancelText:"取消",okText:"去设置",zIndex:2e3,onOk:function(){e.props.history.replace("/company/roles/index")}})},e}return c()(o,[{key:"render",value:function(){return v.createElement(S,{placement:"bottomRight"},v.createElement("div",{className:"role-popover-container"},v.createElement("h1",{className:"role-popover-title"},"适用场景："),v.createElement("img",{className:"role-desc-img",src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/apply-flow/role_popover.png",alt:""}),v.createElement("h1",{className:"role-popover-title"},"用户组定义："),v.createElement("p",{className:"role-popover-content"},"将很多有相同审批职能的人设置为同一用户组，并将这个用户组添加为审批人，如部门总监"),v.createElement("h1",{className:"role-popover-title"},"用户组的管理范围："),v.createElement("p",{className:"role-popover-content"},"可以给用户组里的每成员指定管理的部门，这些部门的员工提交的单据就由该成员审批，默认管理所有人。"),v.createElement("h1",{className:"role-popover-title"},"如何设置："),v.createElement("div",{className:"role-popover-steps"},v.createElement("div",{className:"role-popover-step"},v.createElement("span",{className:"icon"},"1"),v.createElement("span",{className:"desc"},"进入组织架构设置用户组"),v.createElement("span",{className:"arrow"},v.createElement("img",{src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/apply-flow/role-popover-arrow.png",alt:""}))),v.createElement("div",{className:"role-popover-step"},v.createElement("span",{className:"icon"},"2"),v.createElement("span",{className:"desc"},"设置用户组的管理范围"),v.createElement("span",{className:"arrow"},v.createElement("img",{src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/apply-flow/role-popover-arrow.png",alt:""}))),v.createElement("div",{className:"role-popover-step"},v.createElement("span",{className:"icon"},"3"),v.createElement("span",{className:"desc"},"审批流里使用用户组"))),v.createElement(y.Z,{className:"set-role-btn",onClick:this.linkRolePage},"设置用户组")))}}]),o}(v.Component))||Z},40585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ue});var a=n(63497),r=n.n(a),o=n(23010),l=n.n(o),i=n(74720),c=n.n(i),s=n(48550),m=n.n(s),u=n(9830),d=n.n(u),p=n(30695),f=n.n(p),v=n(83507),h=n.n(v),y=n(69024),E=n.n(y),g=n(600),b=n.n(g),N=n(67294),w=n(80411),_=n.n(w),C=n(34046),k=n(48086),Z=n(19181),S=n(59314),D=n(31097),M=n(57016),x=n(14617),P=n(71577),R=n(83107);const T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};var O=n(30076),L=function(e,t){return N.createElement(O.Z,Object.assign({},e,{ref:t,icon:T}))};L.displayName="CloseOutlined";const V=N.forwardRef(L);var F=n(45724),B=n(41584),H=(0,B.qW)(F.zH),A=(0,B.qW)(F.ve),j=(0,B.qW)(F.J_),W=(0,B.qW)(F.S_),q=(0,B.qW)(F.w9),I=(0,B.qW)(F.LI),z=function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=t.length,a="",r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*n));return a},G=function e(t){for(var n=0;n<t.length;){var a=t[n],r=a.lineNodes;a.node_type===F.KT&&r&&r.length>0?(r.forEach((function(e,t){t<9&&e.node_option&&(e.node_option.includes("0")||(e.node_option="优先级0".concat(t+1))),e.node_seq=n})),t.splice.apply(t,[n,1].concat(l()(e(r))))):a.node_type!=F.dA&&(a.node_seq=n),a.child_nodes&&a.child_nodes.length>0&&e(a.child_nodes),n++}return t},K=function(e){e.forEach((function(e,t){e.node_option="优先级".concat(t+1)}))},J=function(e){var t=[];return function e(n){var a=n.some((function(e){return e.node_type==F.ux})),r=n.some((function(e){return e.node_type==F.Oh})),o=n.some((function(e){return e.node_type==F.PC})),l=n.findIndex((function(e){return e.node_type==F.KT}));a&&t.push(F.ux),r&&t.push(F.Oh),o&&t.push(F.PC),l>=0&&n[l].lineNodes.forEach((function(t){e(t.child_nodes)}))}(e),t},Q=function e(t){var n=!1;return t.some((function(t){return t.node_type===F.KT?(t.lineNodes.forEach((function(t){n=e(t.child_nodes)})),n):t.node_type===F.PC}))},X=function(e){var t=!1;return e.findIndex((function(e){return e.node_type===F.KT?(e.lineNodes.forEach((function(e){t=Q(e.child_nodes)})),t):e.node_type===F.PC}))},Y=n(24457),$=n(26676),U=n(40663),ee=n(29396),te=n(75238);const ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var ae=function(e,t){return N.createElement(O.Z,Object.assign({},e,{ref:t,icon:ne}))};ae.displayName="LeftOutlined";const re=N.forwardRef(ae);var oe=n(80129),le=n.n(oe);function ie(e,t,n,a){var r,o=0;function l(){var l=this,i=Number(new Date)-o,c=arguments;function s(){o=Number(new Date),n.apply(l,c)}function m(){r=void 0}a&&!r&&s(),r&&clearTimeout(r),void 0===a&&i>e?s():!0!==t&&(r=setTimeout(a?m:s,void 0===a?e-i:e))}return"boolean"!=typeof t&&(a=n,n=t,t=void 0),l.cancel=function(){clearTimeout(r)},l}var ce={},se={},me=function(e,t,n){if(""===e||null==e)return"";var a=t.find((function(t){return t.value==e&&t.template_types.includes(Number(n))}));return a?a.label:e},ue=function(e){h()(o,e);var t,n,a=(t=o,n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(r()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=b()(t);if(n){var o=b()(this).constructor;e=r()(a,arguments,o)}else e=a.apply(this,arguments);return E()(this,e)});function o(e){var t,n;return d()(this,o),(t=a.call(this,e)).tempTitleRef=(0,N.createRef)(),t.initData=function(){var e,n,a=le().parse(location.search,{ignoreQueryPrefix:!0}),r=a.template_name,o=void 0===r?"":r,l=(a.template_id,a.template_type),i=a.doc_tmpl_type;switch(+i){case 2:e=1;break;default:e=2}n=1==e?[{node_type:F.WD,key:z()},(0,F.yl)(2),{node_type:F.xV,key:z()}]:[{node_type:F.WD,key:z()},(0,F.yl)(2),(0,F.du)(),(0,F.ok)(),{node_type:F.xV,key:z()}],t.setState({approvalFlowData:n,template_name:decodeURIComponent(o),template_type:l,doc_tmpl_type:i,template:e})},t.onSaveTemp=function(){t.setState({submitLoading:!0});var e=function(e){var n=e.node_value&&JSON.parse(e.node_value)||{};if(n.users&&t.haddleQuit(n.users))return!1;if(n.roles&&t.haddleRoleStatus(n.roles))return!1;if(e.node_type===F.ux&&3==n.user_type&&(!n.users||0==n.users.length))return!1;if(!(e.node_type!==F.Oh&&e.node_type!==F.PC||3!=n.user_type||n.users&&0!=n.users.length))return!1;if(e.node_type===F.dA){if(!(n.conditions&&0!=n.conditions.length||e.default))return!1;for(var a=n.conditions,r=void 0===a?[]:a,o=!0,l=0;l<r.length;l++)if(r[l].type===F.Bv)for(var i=r[l].value.split(","),c=0;c<i.length;c++){var s=i[c].split("#"),u=m()(s,3);if(u[0],u[1],"true"===u[2]){o=!1;break}}if(!o)return o}return!!(e.node_type!==F.k0||n.users&&0!=n.users.length||n.level_num)},n=G((0,B.p$)(t.state.approvalFlowData));if(!function t(n){for(var a=!0,r=0;r<n.length&&(a=e(n[r]))&&(n[r].node_type==F.dA&&(a=t(n[r].child_nodes)),a);r++);return a}(n))return t.setState({submitLoading:!1}),void k.ZP.warn("存在节点信息配置不完整，详见流程图警告提示");t.state.template_id,t.state.template_name,t.state.template_type,n.slice(1,-1),k.ZP.success("保存成功"),t.goBack()},t.generateNodeContainer=function(e){return e&&e.map((function(n,a){switch(n.node_type){case F.WD:case F.xV:return t.generateApplicantNode(n,a,e);case F.Oh:return t.generateFinancialNode(n,a,e);case F.PC:return t.generatePaymentNode(n,a,e);case F.ux:return t.generateApprovalNode(n,a,e);case F.k0:return t.generateNotifyNode(n,a,e);case F.KT:return t.generateRouteNode(n,a,e)}}))},t.generateApplicantNode=function(e,n,a){return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",null,N.createElement("div",{className:"node-box-start"},N.createElement(C.Z,{visible:e.node_type!=F.xV},N.createElement("div",{className:"content"},"开始")),N.createElement(C.Z,{visible:e.node_type==F.xV},N.createElement("div",{className:"content"},"结束")))),N.createElement(C.Z,{visible:e.node_type!=F.xV},N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"}))))))},t.generateSelectorNode=function(e,n,a,r){var o,l={};return e.node_value&&(o=JSON.parse(e.node_value).conditions),o&&(l=t.generateConditionTemp(o,Number(t.state.doc_tmpl_type))),N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:"node-condition"},N.createElement("div",{className:_()("node-box","node-box-condition"),onClick:function(n){t.showDrawer(n,e,r)}},N.createElement("div",{className:"line-end-arrow"}),l.isHaveQuit&&t.generateCreateWarning("人员离职或用户组删除"),N.createElement("div",{className:"title"},N.createElement("span",{className:"title-text"},e.node_name),N.createElement("span",{className:"node-priority"},e.node_option),N.createElement(C.Z,{visible:!e.default},N.createElement("span",{className:"node-title-operate"},N.createElement(V,{onClick:function(e){t.deleteCondition(e,r)}})))),N.createElement("div",{className:_()("content",{"defaul-condition":e.default})},N.createElement(C.Z,{visible:!o&&!e.default},N.createElement("div",{className:"no-condition"},N.createElement("span",null),"请设置条件")),N.createElement(C.Z,{visible:!o&&e.default},"未满足其他条件分支的情况，将使用默认流程"),N.createElement(C.Z,{visible:o},N.createElement("div",{className:"condition-line",key:"title"},"需同时满足以下条件："),l.conditionsNode)))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"})))))},t.generateApprovalNode=function(e,n,a){var r=JSON.parse(e.node_value),o=t.haddleMembers(r.users),l=o.isHaveQuit,i=o.members,c=t.haddleRoles(r.roles),s=c.isEmpty,m=c.isDel,u=c.tooltip,d=c.roles;return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:_()("node-box","node-box-approval"),onClick:function(n){t.showDrawer(n,e)}},N.createElement("div",{className:"line-end-arrow"}),l&&t.generateCreateWarning("审批人已离职"),(s||m)&&t.generateCreateWarning(u),N.createElement("div",{className:"title"},N.createElement("span",{className:"title-text"},e.node_name),N.createElement("span",{className:"node-title-operate"},N.createElement(V,{style:{color:"#898c96"},onClick:function(e){t.deleteNode(e,n,a)}}))),N.createElement(C.Z,{visible:r.user_type==F.Dw},N.createElement("div",{className:"content"},q(r.level_num))),N.createElement(C.Z,{visible:r.user_type==F.d},N.createElement(C.Z,{visible:i&&i.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定成员：",i&&i))),N.createElement(C.Z,{visible:!i||0==i.length},N.createElement("span",{className:"content no-condition"},N.createElement("span",null),"请指定审批人"))),N.createElement(C.Z,{visible:r.user_type==F.MZ},N.createElement(C.Z,{visible:d&&d.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定用户组：",d&&d)))),N.createElement(C.Z,{visible:r.user_type==F.EN},N.createElement(C.Z,{visible:1==r.level_type},N.createElement("div",{className:"content"},"从直接主管到发起人向上的",q(r.level_num))),N.createElement(C.Z,{visible:2==r.level_type},N.createElement("div",{className:"content"},"从直接主管到通讯录级别最高的",I(r.level_num))))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"})))))},t.generateFinancialNode=function(e,n,a){var r=JSON.parse(e.node_value),o=t.haddleMembers(r.users),l=o.isHaveQuit,i=o.members,c=t.haddleRoles(r.roles),s=c.isEmpty,m=c.isDel,u=c.tooltip,d=c.roles;return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:_()("node-box","node-box-financial"),onClick:function(n){t.showDrawer(n,e)}},N.createElement("div",{className:"line-end-arrow"}),l&&t.generateCreateWarning("审核人已离职"),(s||m)&&t.generateCreateWarning(u),N.createElement("div",{className:"title"},N.createElement("span",{className:"title-text"},e.node_name)),N.createElement(C.Z,{visible:1==r.user_type},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"全部审单会计"))),N.createElement(C.Z,{visible:2==r.user_type&&i&&i.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"审单会计：",i&&i))),N.createElement(C.Z,{visible:3==r.user_type&&i&&i.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定成员：",i&&i))),N.createElement(C.Z,{visible:r.user_type==F.MZ},N.createElement(C.Z,{visible:d&&d.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定用户组：",d&&d))))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"})))))},t.generateNotifyNode=function(e,n,a){var r=JSON.parse(e.node_value),o=t.haddleMembers(r.users),l=o.isHaveQuit,i=o.members,c=r.level_num&&r.level_num.split(",").map((function(e){return q(e)}));return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:_()("node-box","node-box-notify"),onClick:function(n){t.showDrawer(n,e)}},N.createElement("div",{className:"line-end-arrow"}),l&&t.generateCreateWarning("抄送人已离职"),N.createElement("div",{className:"title"},N.createElement("span",{className:"title-text"},e.node_name),N.createElement("span",{className:"node-title-operate"},N.createElement(V,{style:{color:"#898c96"},onClick:function(e){t.deleteNode(e,n,a)}}))),N.createElement(C.Z,{visible:!(i&&0!=i.length||c&&0!=c.length)},N.createElement("span",{className:"content no-condition"},N.createElement("span",null),"请指定抄送人")),N.createElement(C.Z,{visible:i&&i.length>0||c&&c.length>0},N.createElement("div",{className:"content"},N.createElement("div",{className:"condition-line"},"指定成员：",i&&i,i&&c&&",",c&&c.join(","))))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"})))))},t.generatePaymentNode=function(e,n,a){var r=JSON.parse(e.node_value),o=t.haddleMembers(r.users),l=o.isHaveQuit,i=o.members,s=t.haddleRoles(r.roles),m=s.isEmpty,u=s.isDel,d=s.tooltip,p=s.roles;return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:_()("node-box","node-box-payment"),onClick:function(n){t.showDrawer(n,e)}},N.createElement("div",{className:"line-end-arrow"}),l&&t.generateCreateWarning("结算人已离职"),(m||u)&&t.generateCreateWarning(d),N.createElement("div",{className:"title"},N.createElement("span",{className:"title-text"},e.node_name),N.createElement("span",{className:"node-switch"},N.createElement(S.Z,{size:"small",onChange:function(n,a){!function(e,n,a){var r=JSON.parse(a.node_value);n&&n.preventDefault(),n&&n.stopPropagation(),r.pay_status=e?1:2,a.node_value=c()(r),t.setState({approvalFlowData:t.state.approvalFlowData})}(n,a,e)},checked:1==r.pay_status}))),N.createElement(C.Z,{visible:1==r.user_type},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"全部出纳"))),N.createElement(C.Z,{visible:2==r.user_type&&i&&i.length>0},N.createElement("span",{className:"content"},"M",N.createElement("div",{className:"condition-line"},"出纳：",i&&i))),N.createElement(C.Z,{visible:3==r.user_type&&i&&i.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定成员：",i&&i))),N.createElement(C.Z,{visible:r.user_type==F.MZ},N.createElement(C.Z,{visible:p&&p.length>0},N.createElement("span",{className:"content"},N.createElement("div",{className:"condition-line"},"指定用户组：",p&&p))))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:t.generateCreateNodeBtns(e.node_type,n,a)},N.createElement("div",{className:"btn"})))))},t.generateCreateWarning=function(e){return N.createElement(D.Z,{placement:"top",title:e},N.createElement("div",{className:"node-box-warning"},N.createElement("img",{src:"https://apg-1258944054.cos.ap-guangzhou.myqcloud.com/apg/pc-micro-reimburse/common/%21.svg",alt:""})))},t.haddleRoles=function(e){var t=!1,n=!1,a="";return{roles:e&&e.map((function(e,r){var o="";return e.is_del&&(n=!0,o="quit",a="用户组已删除"),e.is_empty&&(t=!0,o="quit",a="用户组无成员"),N.createElement("span",{className:o,key:"members"+e.rid},"".concat(e.rname).concat(e.is_empty?"(无成员)":"").concat(e.is_del?"(已删除)":""))})),isEmpty:t,isDel:n,tooltip:a}},t.generateConditionTemp=function(e,n){var a=t.state.conditionLabelMap,r=(0,B.qW)([],"已删除");if(!e)return null;var o=!1,l=e.map((function(e,t){switch(e.type){case F.l9:var l=e.value&&e.value.split(",").map((function(e){var t=e.split("#"),n=m()(t,3),a=n[0],r=n[1],l="";return n[2]&&(o=!0,l="quit",r+="(已离职)"),N.createElement("span",{className:l,key:"members"+a},r)}));return N.createElement("div",{className:"condition-line conditions",key:t},a.commiter||W(F.l9),": ",H(e.compare)," ",l);case F.Bv:var i=e.value&&e.value.split(",").map((function(e){var t=e.split("#"),n=m()(t,3),a=n[0],r=n[1],l=n[2],i="";return l&&"true"===l&&(o=!0,i="quit",r+="(已删除)"),N.createElement("span",{className:i,key:"members"+a},r)}));return N.createElement("div",{className:"condition-line conditions",key:t},W(F.Bv),": ",H(e.compare)," ",i);case F.Fr:var c=e.value&&e.value.split(",").map((function(e){var t=e.split("#"),n=m()(t,2);return n[0],n[1]}));return N.createElement("div",{className:"condition-line conditions",key:t},a.department||W(F.Fr),": ",H(e.compare)," ",c.join(","));case F.Al:var s=e.value&&e.value.split(",").map((function(e){var t=e.split("#"),n=m()(t,2);return n[0],n[1]}));return N.createElement("div",{className:"condition-line conditions",key:t},a.title||W(F.Al),": ",H(e.compare)," ",s.join(","));case F.lt:var u=e.value&&e.value.split(",").map((function(e){var t=e.split("#"),n=m()(t,2);return n[0],n[1]}));return N.createElement("div",{className:"condition-line conditions",key:t},W(F.lt),": ",A(e.compare)," ",u.join(","));case F.w7:var d=e.value&&e.value.split(",").map((function(e){return r(e)}));return N.createElement("div",{className:"condition-line conditions",key:t},a.trans_way||W(F.w7),": ",A(e.compare)," ",d.join(","));case F.NY:var p=e.value&&e.value.split(",").map((function(e){return r(e)}));return N.createElement("div",{className:"condition-line conditions",key:t},a.travel_type||W(F.NY),": ",H(e.compare)," ",p.join(","));case F.l2:var f=e.value&&e.value.split(",").map((function(e){return e}));return N.createElement("div",{className:"condition-line conditions",key:t},W(F.l2),": ",H(e.compare)," ",f.join(","));case F.j4:var v=e.value&&e.value.split(","),h=m()(v,2),y=h[0],E=h[1];return N.createElement("div",{className:"condition-line conditions",key:t},me(e.type,F.S_,n),": ",j(e.compare),+y,E&&" - ".concat(+E),"小时");case F.Bc:var g=e.value&&e.value.split(","),b=m()(g,2),w=b[0],_=b[1];return N.createElement("div",{className:"condition-line conditions",key:t},a.amount||me(e.type,F.S_,n),": ",j(e.compare),(+w).div(100),_&&"-".concat((+_).div(100)))}}));return{isHaveQuit:o,conditionsNode:l}},t.generateCreateNodeBtns=function(e,n,a){var r=function e(t){for(var a=t.slice(0,n+1),r=!1,o=0;o<a.length;o++){var l=a[o];if(l.node_type===F.KT&&l.lineNodes.forEach((function(t){r=e(t.child_nodes)})),l.node_type===F.PC){r=!0;break}}return r};return N.createElement("div",{className:"add-button-container"},N.createElement(C.Z,{visible:!r(a)},N.createElement("div",{className:"add-button-wrapper"},N.createElement("span",{className:"icon audit-icon",onClick:function(){t.onCreateNode(F.ux,n,a)}}),N.createElement("span",{style:{color:"#007AFF"},onClick:function(){t.onCreateNode(F.ux,n,a)}},"审批人"))),N.createElement("div",{className:"add-button-wrapper"},N.createElement("span",{className:"icon cc-icon",onClick:function(){t.onCreateNode(F.k0,n,a)}}),N.createElement("span",{style:{color:"#F8A209"},onClick:function(){t.onCreateNode(F.k0,n,a)}},"抄送人")),N.createElement(C.Z,{visible:function(t){return e===F.dA||t[n+1]&&t[n+1].node_type!=F.xV&&!r(t)}(a)},N.createElement("div",{className:"add-button-wrapper"},N.createElement("span",{className:"icon condition-icon",onClick:function(){t.onCreateNode(F.KT,n,a)}}),N.createElement("span",{style:{color:"#898C96"},onClick:function(){t.onCreateNode(F.KT,n,a)}},"条件"))))},t.deleteCondition=function(e,n){e.stopPropagation(),M.Z.confirm({content:"是否确认删除该条件？",title:"提示",onOk:function(){if(n.currentNodes.lineNodes.length>2)n.currentNodes.lineNodes.splice(n.index,1),K(n.currentNodes.lineNodes);else{var e,a=n.currentNodes.lineNodes[1].child_nodes,r=n.approvalFlowData.findIndex((function(e){return e.key==n.currentNodes.key}));(e=n.approvalFlowData).splice.apply(e,[r,1].concat(l()(a)))}t.setState({approvalFlowData:t.state.approvalFlowData})}})},t.deleteNode=function(e,n,a){e.stopPropagation(),M.Z.confirm({content:"是否确认删除该节点？",title:"提示",onOk:function(){a.splice(n,1),t.setState({approvalFlowData:t.state.approvalFlowData})}})},t.addConditionNode=function(e){if(e.length>98)k.ZP.warn("最多能添加99个条件");else{var n=[];e.forEach((function(e){n=[].concat(l()(n),l()(J(e.child_nodes)))}));var a=[];n.includes(F.ux)&&a.push((0,F.yl)()),n.includes(F.Oh)&&a.push((0,F.du)()),n.includes(F.PC)&&a.push((0,F.ok)()),e.splice(-1,0,(0,F.lf)(a,"条件".concat(e.length))),K(e),t.setState({approvalFlowData:t.state.approvalFlowData}),console.log(t.state.approvalFlowData)}},t.onCreateNode=function(e,n,a){var r=a[n],o=t.state.template;switch(e){case F.ux:r.node_type==F.dA?r.child_nodes.unshift((0,F.yl)()):a.splice(n+1,0,(0,F.yl)());break;case F.k0:r.node_type==F.dA?r.child_nodes.unshift((0,F.y5)()):a.splice(n+1,0,(0,F.y5)());break;case F.KT:var l,i=X(a),c=a[a.length-1];l=r.node_type==F.dA?r.child_nodes:n<i?n+1===i?a.slice(n+1,-1):a.slice(n+1,i):1==o?c.node_type==F.xV?a.slice(n+1,-1):a.slice(n+1):c.node_type==F.xV?a.slice(n+1,-2):a.slice(n+1);var s=[],m=J(l);m.includes(F.ux)&&s.push((0,F.yl)()),m.includes(F.Oh)&&s.push((0,F.du)()),m.includes(F.PC)&&s.push((0,F.ok)()),r.node_type==F.dA?r.child_nodes=[{node_type:e,key:z(),lineNodes:[(0,F.lf)(s),(0,F.lf)(l,"默认条件","优先级2",!0)]}]:a.splice(n+1,l.length,{node_type:e,key:z(),lineNodes:[(0,F.lf)(s),(0,F.lf)(l,"默认条件","优先级2",!0)]})}t.setState({approvalFlowData:t.state.approvalFlowData}),console.log(t.state.approvalFlowData)},t.onShowDrawer=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ce=e,n&&(se=n),e.default||t.setState({drawerVisible:!0})},t.showDrawer=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.onShowDrawer(n,a)},t.onCloseDrawer=function(){t.setState({drawerVisible:!1})},t.generateDrawerContent=function(){switch(ce.node_type){case F.ux:return N.createElement(Y.default,{drawerData:ce,onCloseDrawer:t.onCloseDrawer,onSubmit:t.onDrawerSubmit});case F.dA:return N.createElement($.default,{drawerData:ce,onChangePriority:t.onChangePriority,lineNodesConfig:se,onCloseDrawer:t.onCloseDrawer,onSubmit:t.onDrawerSubmit,conditionLabelMap:t.state.conditionLabelMap});case F.Oh:return N.createElement(U.default,{drawerData:ce,onCloseDrawer:t.onCloseDrawer,onSubmit:t.onDrawerSubmit});case F.PC:return N.createElement(ee.default,{drawerData:ce,onCloseDrawer:t.onCloseDrawer,onSubmit:t.onDrawerSubmit});case F.k0:return N.createElement(te.default,{drawerData:ce,onCloseDrawer:t.onCloseDrawer,onSubmit:t.onDrawerSubmit})}},t.onChangePriority=function(e,n){console.log(se);var a=[se.currentNodes.lineNodes[n],se.currentNodes.lineNodes[e]];se.currentNodes.lineNodes[e]=a[0],se.currentNodes.lineNodes[n]=a[1],K(se.currentNodes.lineNodes),t.setState({approvalFlowData:t.state.approvalFlowData})},t.onDrawerSubmit=function(e){ce.node_value=e.node_value,ce.node_name=e.node_name,t.setState({approvalFlowData:t.state.approvalFlowData,drawerVisible:!1})},t.scaleContent=function(e){var n=t.state,a=n.scale,r=n.scaleStyle;if("-"==e){if(a<=.5)return;a=+(a-=.1).toFixed(1)}else{if(1==a)return;a=+(a+=.1).toFixed(1)}r={MsTransform:"scale(".concat(a,")"),MozTransform:"scale(".concat(a,")"),WebkitTransform:"scale(".concat(a,")"),transform:"scale(".concat(a,")")},t.setState({scale:a,scaleStyle:r})},t.setTempTitleEdit=function(){t.setState({tempTitleEdit:!0},(function(){t.tempTitleRef.current.focus()}))},t.onTempTitleChange=function(e){t.setState({template_name:e.target.value})},t.onTempTitleBlur=function(){t.setState({tempTitleEdit:!1})},t.onCancel=function(){M.Z.confirm({title:"提示",content:"取消后配置的内容将不会保存，确定取消吗？",onOk:function(){t.goBack()}})},t.afterVisibleChange=function(e){e?setTimeout((function(){document.querySelector("body").setAttribute("style","overflow-y: hidden; touch-action: none;")})):setTimeout((function(){document.querySelector("body").setAttribute("style","overflow-y: auto")}),0)},t.goBack=function(){sessionStorage.setItem("echo_selected_custom_doc_tmpl",c()({type:Number(t.state.template_type),currTab:"1"})),history.back()},t.state={approvalFlowData:[],drawerVisible:!1,approvalDrawerModel:{},tempTitleEdit:!1,titleEditable:!1,scaleStyle:null,scale:1,submitLoading:!1,template_name:null,template_id:null,template_type:null,doc_tmpl_type:null,conditions_quit:!1,conditionLabelMap:{},template:2},t.showDrawer=(300,!1,void 0===(n=t.showDrawer)?ie(300,false,!1):ie(300,n,!1)),t}return f()(o,[{key:"componentDidMount",value:function(){this.initData()}},{key:"generateRouteNode",value:function(e,t,n){var a=this;return N.createElement("div",{className:"node-container",key:e.key},N.createElement("div",{className:"branch-wrap"},N.createElement("div",{className:"branch-wrap-box"},N.createElement("div",{className:"branch-box"},N.createElement("div",{className:"add-branch",onClick:function(){a.addConditionNode(e.lineNodes)}},"添加条件"),e.lineNodes.map((function(t,r){return N.createElement("div",{className:"col-box",key:t.key},N.createElement(C.Z,{visible:0==r},N.createElement("div",{className:"top-left-cover-line"}),N.createElement("div",{className:"bottom-left-cover-line"})),N.createElement(C.Z,{visible:r==e.lineNodes.length-1},N.createElement("div",{className:"top-right-cover-line"}),N.createElement("div",{className:"bottom-right-cover-line"})),a.generateSelectorNode(t,r,e.lineNodes,{currentNodes:e,index:r,approvalFlowData:n}),a.generateNodeContainer(t.child_nodes))}))))),N.createElement("div",{className:"add-node-btn-box"},N.createElement("div",{className:"add-node-btn"},N.createElement(Z.Z,{placement:"right",content:this.generateCreateNodeBtns(e.node_type,t,n)},N.createElement("div",{className:"btn"})))))}},{key:"haddleMembers",value:function(e){var t=!1;return{members:e&&e.map((function(e,n){var a="";return(e.leave||e.is_del||e.is_empty)&&(t=!0,a="quit"),N.createElement("span",{className:a,key:"members"+e.uid},"".concat(e.uname).concat(e.leave?"(已离职)":""))})),isHaveQuit:t}}},{key:"haddleQuit",value:function(e){var t=!1;return e&&e.map((function(e){e.leave&&(t=!0)})),t}},{key:"haddleRoleStatus",value:function(e){var t=!1;return e&&e.forEach((function(e){(e.is_empty||e.is_del)&&(t=!0)})),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.tempTitleEdit,a=t.template_name,r=t.submitLoading;return N.createElement("div",{className:"approvalFlow_frame"},N.createElement("div",{className:"scale-bar"},N.createElement("span",{className:"ctrl-btn",onClick:function(){e.scaleContent("-")}},"-"),N.createElement("span",null,100*this.state.scale,"%"),N.createElement("span",{className:"ctrl-btn",onClick:function(){e.scaleContent("+")}},"+")),N.createElement("div",{className:"approvalFlow_header"},N.createElement("span",{className:"back",onClick:this.goBack},N.createElement(re,null)),N.createElement("span",{className:"title"},N.createElement(C.Z,{visible:!n},N.createElement("div",{className:"temp-title",onClick:this.setTempTitleEdit},N.createElement("span",{className:"text",style:{fontSize:16}},a),N.createElement("span",{className:"edit-icon"}))),N.createElement(C.Z,{visible:n},N.createElement(x.Z,{maxLength:20,value:a,onChange:this.onTempTitleChange,onBlur:this.onTempTitleBlur,ref:this.tempTitleRef,style:{width:"50%"}}))),N.createElement("span",{className:"approvalFlow_header_btn_bar"},N.createElement(P.Z,{type:"text",onClick:function(){e.onCancel()}},"取消"),N.createElement(P.Z,{type:"primary",loading:r,onClick:this.onSaveTemp},"保存"))),N.createElement("div",{id:"approvalFlow"},N.createElement("div",{className:"approvalFlow-content-outer"},N.createElement("div",{className:"approvalFlow-content",style:this.state.scaleStyle},this.generateNodeContainer(this.state.approvalFlowData)))),N.createElement(R.Z,{width:"60%",placement:"right",onClose:this.onCloseDrawer,visible:this.state.drawerVisible,id:"approval-flow-drawer",destroyOnClose:!0,afterVisibleChange:this.afterVisibleChange,closable:!1},this.generateDrawerContent()))}}]),o}(N.Component)},50132:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(22122),r=n(81253),o=n(96156),l=n(6610),i=n(5991),c=n(65255),s=n(46070),m=n(77608),u=n(67294),d=n(94184),p=n.n(d);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){(0,c.Z)(f,e);var t,n,d=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,m.Z)(t);if(n){var r=(0,m.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,s.Z)(this,e)});function f(e){var t;(0,l.Z)(this,f),(t=d.call(this,e)).handleChange=function(e){var n=t.props,a=n.disabled,r=n.onChange;a||("checked"in t.props||t.setState({checked:e.target.checked}),r&&r({target:v(v({},t.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},t.saveInput=function(e){t.input=e};var n="checked"in e?e.checked:e.defaultChecked;return t.state={checked:n},t}return(0,i.Z)(f,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,l=t.className,i=t.style,c=t.name,s=t.id,m=t.type,d=t.disabled,f=t.readOnly,v=t.tabIndex,h=t.onClick,y=t.onFocus,E=t.onBlur,g=t.autoFocus,b=t.value,N=t.required,w=(0,r.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","autoFocus","value","required"]),_=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),C=this.state.checked,k=p()(n,l,(e={},(0,o.Z)(e,"".concat(n,"-checked"),C),(0,o.Z)(e,"".concat(n,"-disabled"),d),e));return u.createElement("span",{className:k,style:i},u.createElement("input",(0,a.Z)({name:c,id:s,type:m,required:N,readOnly:f,disabled:d,tabIndex:v,className:"".concat(n,"-input"),checked:!!C,onClick:h,onFocus:y,onBlur:E,onChange:this.handleChange,autoFocus:g,ref:this.saveInput,value:b},_)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?v(v({},t),{},{checked:e.checked}):null}}]),f}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){}};const y=h},24444:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var a=n(81253),r=n(6610),o=n(5991),l=n(65255),i=n(46070),c=n(77608),s=n(72944),m=n(67294),u=n(96156),d=n(63349),p=n(94184),f=n.n(p),v=n(74204),h=n(15105),y={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},E=Object.keys(y).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0],g=y[E];function b(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on".concat(t),n)}function N(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.attachEvent&&e.detachEvent("on".concat(t),n)}var w=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},_=!("undefined"!=typeof window&&window.document&&window.document.createElement),C=function e(t,n,a,r){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var o=Math.max(Math.abs(a),Math.abs(r))===Math.abs(r),l=Math.max(Math.abs(a),Math.abs(r))===Math.abs(a),i=n.scrollHeight-n.clientHeight,c=n.scrollWidth-n.clientWidth,s=document.defaultView.getComputedStyle(n),m="auto"===s.overflowY||"scroll"===s.overflowY,u="auto"===s.overflowX||"scroll"===s.overflowX,d=i&&m,p=c&&u;return!!(o&&(!d||d&&(n.scrollTop>=i&&r<0||n.scrollTop<=0&&r>0))||l&&(!p||p&&(n.scrollLeft>=c&&a<0||n.scrollLeft<=0&&a>0)))&&e(t,n.parentNode,a,r)};var k={},Z=function(e){(0,l.Z)(p,e);var t,n,s=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,r.Z)(this,p),(t=s.call(this,e)).domFocus=function(){t.dom&&t.dom.focus()},t.removeStartHandler=function(e){e.touches.length>1||(t.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},t.removeMoveHandler=function(e){if(!(e.changedTouches.length>1)){var n=e.currentTarget,a=e.changedTouches[0].clientX-t.startPos.x,r=e.changedTouches[0].clientY-t.startPos.y;(n===t.maskDom||n===t.handlerDom||n===t.contentDom&&C(n,e.target,a,r))&&e.cancelable&&e.preventDefault()}},t.transitionEnd=function(e){var n=e.target;N(n,g,t.transitionEnd),n.style.transition=""},t.onKeyDown=function(e){if(e.keyCode===h.Z.ESC){var n=t.props.onClose;e.stopPropagation(),n&&n(e)}},t.onWrapperTransitionEnd=function(e){var n=t.props,a=n.open,r=n.afterVisibleChange;e.target===t.contentWrapper&&e.propertyName.match(/transform$/)&&(t.dom.style.transition="",!a&&t.getCurrentDrawerSome()&&(document.body.style.overflowX="",t.maskDom&&(t.maskDom.style.left="",t.maskDom.style.width="")),r&&r(!!a))},t.openLevelTransition=function(){var e=t.props,n=e.open,a=e.width,r=e.height,o=t.getHorizontalBoolAndPlacementName(),l=o.isHorizontal,i=o.placementName,c=t.contentDom?t.contentDom.getBoundingClientRect()[l?"width":"height"]:0,s=(l?a:r)||c;t.setLevelAndScrolling(n,i,s)},t.setLevelTransform=function(e,n,a,r){var o=t.props,l=o.placement,i=o.levelMove,c=o.duration,s=o.ease,m=o.showMask;t.levelDom.forEach((function(o){o.style.transition="transform ".concat(c," ").concat(s),b(o,g,t.transitionEnd);var u,d,p=e?a:0;if(i){var f=(d="function"==typeof(u=i)?u({target:o,open:e}):u,Array.isArray(d)?2===d.length?d:[d[0],d[1]]:[d]);p=e?f[0]:f[1]||0}var v="number"==typeof p?"".concat(p,"px"):p,h="left"===l||"top"===l?v:"-".concat(v);h=m&&"right"===l&&r?"calc(".concat(h," + ").concat(r,"px)"):h,o.style.transform=p?"".concat(n,"(").concat(h,")"):""}))},t.setLevelAndScrolling=function(e,n,a){var r=t.props.onChange;if(!_){var o=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?(0,v.Z)(!0):0;t.setLevelTransform(e,n,a,o),t.toggleScrollingToDrawerAndBody(o)}r&&r(e)},t.toggleScrollingToDrawerAndBody=function(e){var n=t.props,a=n.getOpenCount,r=n.getContainer,o=n.showMask,l=n.open,i=r&&r(),c=a&&a();if(i&&i.parentNode===document.body&&o){var s=["touchstart"],m=[document.body,t.maskDom,t.handlerDom,t.contentDom];l&&"hidden"!==document.body.style.overflow?(e&&t.addScrollingEffect(e),1===c&&(document.body.style.overflow="hidden"),document.body.style.touchAction="none",m.forEach((function(e,n){e&&b(e,s[n]||"touchmove",n?t.removeMoveHandler:t.removeStartHandler,t.passive)}))):t.getCurrentDrawerSome()&&(c||(document.body.style.overflow=""),document.body.style.touchAction="",e&&t.remScrollingEffect(e),m.forEach((function(e,n){e&&N(e,s[n]||"touchmove",n?t.removeMoveHandler:t.removeStartHandler,t.passive)})))}},t.addScrollingEffect=function(e){var n=t.props,a=n.placement,r=n.duration,o=n.ease,l=n.getOpenCount,i=n.switchScrollingEffect;1===(l&&l())&&i();var c="width ".concat(r," ").concat(o),s="transform ".concat(r," ").concat(o);switch(t.dom.style.transition="none",a){case"right":t.dom.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":t.dom.style.width="calc(100% - ".concat(e,"px)"),t.dom.style.transform="translateZ(0)"}clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.dom&&(t.dom.style.transition="".concat(s,",").concat(c),t.dom.style.width="",t.dom.style.transform="")}))},t.remScrollingEffect=function(e){var n,a=t.props,r=a.placement,o=a.duration,l=a.ease,i=a.getOpenCount,c=a.switchScrollingEffect;i&&i()||c(!0),E&&(document.body.style.overflowX="hidden"),t.dom.style.transition="none";var s="width ".concat(o," ").concat(l),m="transform ".concat(o," ").concat(l);switch(r){case"left":t.dom.style.width="100%",s="width 0s ".concat(l," ").concat(o);break;case"right":t.dom.style.transform="translateX(".concat(e,"px)"),t.dom.style.width="100%",s="width 0s ".concat(l," ").concat(o),t.maskDom&&(t.maskDom.style.left="-".concat(e,"px"),t.maskDom.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":t.dom.style.width="calc(100% + ".concat(e,"px)"),t.dom.style.height="100%",t.dom.style.transform="translateZ(0)",n="height 0s ".concat(l," ").concat(o)}clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.dom&&(t.dom.style.transition="".concat(m,",").concat(n?"".concat(n,","):"").concat(s),t.dom.style.transform="",t.dom.style.width="",t.dom.style.height="")}))},t.getCurrentDrawerSome=function(){return!Object.keys(k).some((function(e){return k[e]}))},t.getLevelDom=function(e){var n=e.level,a=e.getContainer;if(!_){var r,o=a&&a(),l=o?o.parentNode:null;t.levelDom=[],"all"===n?(l?Array.prototype.slice.call(l.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==o&&t.levelDom.push(e)})):n&&(r=n,Array.isArray(r)?r:[r]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){t.levelDom.push(e)}))}))}},t.getHorizontalBoolAndPlacementName=function(){var e=t.props.placement,n="left"===e||"right"===e;return{isHorizontal:n,placementName:"translate".concat(n?"X":"Y")}},t.state={_self:(0,d.Z)(t)},t}return(0,o.Z)(p,[{key:"componentDidMount",value:function(){var e=this;if(!_){var t=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return t=!0,null}}))}catch(e){}this.passive=!!t&&{passive:!1}}var n=this.props,a=n.open,r=n.getContainer,o=r&&r();this.drawerId="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),this.getLevelDom(this.props),a&&(o&&o.parentNode===document.body&&(k[this.drawerId]=a),this.openLevelTransition(),this.forceUpdate((function(){e.domFocus()})))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.open,a=t.getContainer,r=a&&a();n!==e.open&&(n&&this.domFocus(),r&&r.parentNode===document.body&&(k[this.drawerId]=!!n),this.openLevelTransition())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.getOpenCount,n=e.open,a=e.switchScrollingEffect,r="function"==typeof t&&t();delete k[this.drawerId],n&&(this.setLevelTransform(!1),document.body.style.touchAction=""),r||(document.body.style.overflow="",a(!0))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.className,o=n.children,l=n.style,i=n.width,c=n.height,s=(n.defaultOpen,n.open),d=n.prefixCls,p=n.placement,v=(n.level,n.levelMove,n.ease,n.duration,n.getContainer,n.handler),h=(n.onChange,n.afterVisibleChange,n.showMask),y=n.maskClosable,E=n.maskStyle,g=n.onClose,b=n.onHandleClick,N=n.keyboard,_=(n.getOpenCount,n.switchScrollingEffect,(0,a.Z)(n,["className","children","style","width","height","defaultOpen","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","handler","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","onClose","onHandleClick","keyboard","getOpenCount","switchScrollingEffect"])),C=!!this.dom&&s,k=f()(d,(e={},(0,u.Z)(e,"".concat(d,"-").concat(p),!0),(0,u.Z)(e,"".concat(d,"-open"),C),(0,u.Z)(e,r||"",!!r),(0,u.Z)(e,"no-mask",!h),e)),Z=this.getHorizontalBoolAndPlacementName().placementName,S="left"===p||"top"===p?"-100%":"100%",D=C?"":"".concat(Z,"(").concat(S,")"),M=v&&m.cloneElement(v,{onClick:function(e){v.props.onClick&&v.props.onClick(),b&&b(e)},ref:function(e){t.handlerDom=e}});return m.createElement("div",Object.assign({},_,{tabIndex:-1,className:k,style:l,ref:function(e){t.dom=e},onKeyDown:C&&N?this.onKeyDown:void 0,onTransitionEnd:this.onWrapperTransitionEnd}),h&&m.createElement("div",{className:"".concat(d,"-mask"),onClick:y?g:void 0,style:E,ref:function(e){t.maskDom=e}}),m.createElement("div",{className:"".concat(d,"-content-wrapper"),style:{transform:D,msTransform:D,width:w(i)?"".concat(i,"px"):i,height:w(c)?"".concat(c,"px"):c},ref:function(e){t.contentWrapper=e}},m.createElement("div",{className:"".concat(d,"-content"),ref:function(e){t.contentDom=e},onTouchStart:C&&h?this.removeStartHandler:void 0,onTouchMove:C&&h?this.removeMoveHandler:void 0},o),M))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,a=t._self,r={prevProps:e};if(void 0!==n){var o=e.placement,l=e.level;o!==n.placement&&(a.contentDom=null),l!==n.level&&a.getLevelDom(e)}return r}}]),p}(m.Component);Z.defaultProps={switchScrollingEffect:function(){}};const S=Z;var D=function(e){(0,l.Z)(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function d(e){var t;(0,r.Z)(this,d),(t=u.call(this,e)).onHandleClick=function(e){var n=t.props,a=n.onHandleClick,r=n.open;if(a&&a(e),void 0===r){var o=t.state.open;t.setState({open:!o})}},t.onClose=function(e){var n=t.props,a=n.onClose,r=n.open;a&&a(e),void 0===r&&t.setState({open:!1})};var n=void 0!==e.open?e.open:!!e.defaultOpen;return t.state={open:n},"onMaskClick"in e&&console.warn("`onMaskClick` are removed, please use `onClose` instead."),t}return(0,o.Z)(d,[{key:"render",value:function(){var e=this,t=this.props,n=(t.defaultOpen,t.getContainer),r=t.wrapperClassName,o=t.forceRender,l=t.handler,i=(0,a.Z)(t,["defaultOpen","getContainer","wrapperClassName","forceRender","handler"]),c=this.state.open;if(!n)return m.createElement("div",{className:r,ref:function(t){e.dom=t}},m.createElement(S,Object.assign({},i,{open:c,handler:l,getContainer:function(){return e.dom},onClose:this.onClose,onHandleClick:this.onHandleClick})));var u=!!l||o;return m.createElement(s.Z,{visible:c,forceRender:u,getContainer:n,wrapperClassName:r},(function(t){var n=t.visible,r=t.afterClose,o=(0,a.Z)(t,["visible","afterClose"]);return m.createElement(S,Object.assign({},i,o,{open:void 0!==n?n:c,afterVisibleChange:void 0!==r?r:i.afterVisibleChange,handler:l,onClose:e.onClose,onHandleClick:e.onHandleClick}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,a={prevProps:e};return void 0!==n&&e.open!==n.open&&(a.open=e.open),a}}]),d}(m.Component);D.defaultProps={prefixCls:"drawer",placement:"left",getContainer:"body",defaultOpen:!1,level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",onChange:function(){},afterVisibleChange:function(){},handler:m.createElement("div",{className:"drawer-handle"},m.createElement("i",{className:"drawer-handle-icon"})),showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",className:"",keyboard:!0,forceRender:!1};const M=D},33413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(96156),r=n(28481),o=n(81253),l=n(67294),i=n(94184),c=n.n(i),s=n(21770),m=n(15105),u=l.forwardRef((function(e,t){var n,i=e.prefixCls,u=void 0===i?"rc-switch":i,d=e.className,p=e.checked,f=e.defaultChecked,v=e.disabled,h=e.loadingIcon,y=e.checkedChildren,E=e.unCheckedChildren,g=e.onClick,b=e.onChange,N=e.onKeyDown,w=(0,o.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),_=(0,s.Z)(!1,{value:p,defaultValue:f}),C=(0,r.Z)(_,2),k=C[0],Z=C[1];function S(e,t){var n=k;return v||(Z(n=e),null==b||b(n,t)),n}var D=c()(u,d,(n={},(0,a.Z)(n,"".concat(u,"-checked"),k),(0,a.Z)(n,"".concat(u,"-disabled"),v),n));return l.createElement("button",Object.assign({},w,{type:"button",role:"switch","aria-checked":k,disabled:v,className:D,ref:t,onKeyDown:function(e){e.which===m.Z.LEFT?S(!1,e):e.which===m.Z.RIGHT&&S(!0,e),null==N||N(e)},onClick:function(e){var t=S(!k,e);null==g||g(t,e)}}),h,l.createElement("span",{className:"".concat(u,"-inner")},k?y:E))}));u.displayName="Switch";const d=u}}]);