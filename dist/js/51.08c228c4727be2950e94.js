"use strict";(self.webpackChunkreact_webpack=self.webpackChunkreact_webpack||[]).push([[51],{58975:(e,n,l)=>{l.d(n,{Z:()=>b});var t=l(63497),i=l.n(t),a=l(9830),o=l.n(a),c=l(30695),s=l.n(c),r=l(83507),d=l.n(r),u=l(69024),v=l.n(u),p=l(600),h=l.n(p),m=l(85893),f=l(67294);var b=function(e){d()(a,e);var n,l,t=(n=a,l=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(i()(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h()(n);if(l){var a=h()(this).constructor;e=i()(t,arguments,a)}else e=t.apply(this,arguments);return v()(this,e)});function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var e=this.props,n=e.visible,l=e.children,t=n?l:null;return(0,m.jsx)(f.Fragment,{children:t})}}]),a}(f.PureComponent)},17803:(e,n,l)=>{l.r(n),l.d(n,{default:()=>D});var t=l(58548),i=l.n(t),a=l(78829),o=l.n(a),c=l(51765),s=l.n(c),r=l(93287),d=l.n(r),u=l(24309),v=l.n(u),p=l(33929),h=l.n(p),m=l(69984),f=l.n(m),b=l(48550),y=l.n(b),x=l(85893),j=l(67294),_=l(75837),g=l(34041),Z=l(14617),N=l(58975),T=l(80129),k=l.n(T),w=l(7791);function A(e,n){var l=h()(e);if(v()){var t=v()(e);n&&(t=t.filter((function(n){return d()(e,n).enumerable}))),l.push.apply(l,t)}return l}function C(e){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?A(Object(l),!0).forEach((function(n){f()(e,n,l[n])})):s()?o()(e,s()(l)):A(Object(l)).forEach((function(n){i()(e,n,d()(l,n))}))}return e}var L=_.Z.TreeNode,S=g.Z.Option;const D=function(e){var n=e.value,l=void 0===n?{}:n,t=e.onChange,i=e.showMemberSelector,a=e.index,o=e.showRoleSelector,c=e.showInvoiceSelector,s=e.parentFields,r=e.showFeeTypeSelector,d=e.showDepartSelector,u=e.showTravelTypeSelector,v=e.showTravelModeSelector,p=e.cityConfigList,h=e.conditionLabelMap,m=(0,j.useState)(l.relation),f=y()(m,2),b=f[0],T=f[1],A=(0,j.useState)(l.conditionType),D=y()(A,2),E=D[0],F=D[1],M=(0,j.useState)(l.startAmount),B=y()(M,2),O=B[0],P=B[1],R=(0,j.useState)(l.endAmount),z=y()(R,2),H=z[0],J=z[1],Y=(0,j.useState)(l.officeLocationData),G=y()(Y,2),I=G[0],q=G[1],K=[];switch(l.conditionType){case w.l9:case w.Fr:case w.Al:case w.l2:case w.NY:case w.Bv:K=w.zH;break;case w.lt:case w.w7:K=w.ve;break;case w.j4:default:K=w.J_}var Q=(0,j.useState)(K),W=y()(Q,2),U=W[0],V=W[1],X=l.members,$=void 0===X?[]:X,ee=l.roles,ne=void 0===ee?[]:ee,le=l.departs,te=void 0===le?[]:le,ie=l.titles,ae=void 0===ie?[]:ie,oe=l.feeData,ce=void 0===oe?[]:oe,se=l.travelModeData,re=void 0===se?[]:se,de=l.travelTypeData,ue=void 0===de?[]:de,ve=k().parse(window.location.search,{ignoreQueryPrefix:!0}).doc_tmpl_type,pe=w.S_.filter((function(e){return"ALL"===e.template_types||e.template_types.includes(+ve)}));(0,j.useEffect)((function(){var e;(function(e){if(null==e)return!0})(E)||(e={conditionType:E,relation:b,officeLocationData:I,startAmount:O,endAmount:H},t&&t(C(C({conditionType:E,relation:b},l),e)))}),[E,b,I,O,H]);var he=function(e){P(e.target.value)},me=function e(n){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=[];return n.length>0&&n.forEach((function(n){n.child?t.push((0,x.jsx)(L,{isLeaf:!1,selectable:!1,value:"".concat(l,"|").concat(n.name),title:n.name,children:e(n.child,n.name)},"".concat(n.name,"parent"))):t.push((0,x.jsx)(L,{isLeaf:!0,value:"".concat(l,"|").concat(n.name),title:n.name},"".concat(n.name,"child")))})),t}(p);return(0,x.jsxs)("span",{className:"condition-edit-wrap",style:{display:"flex"},children:[(0,x.jsx)(g.Z,{value:l.conditionType||E,placeholder:"请选择条件",onChange:function(e){switch(F(e),e){case w.l9:case w.Fr:case w.Al:case w.l2:case w.NY:case w.Bv:V(w.zH),T(w.zH[0].value);break;case w.lt:case w.w7:V(w.ve),T(w.ve[0].value);break;case w.j4:default:V(w.J_),T(w.J_[0].value)}P(null),J(null)},className:"condition-type-select",children:pe.map((function(e){return(0,x.jsx)(S,{value:e.value,disabled:s.includes(e.value),children:h[e.field]||e.label},e.value)}))}),(0,x.jsx)(N.Z,{visible:void 0!==l.conditionType&&null!==l.conditionType,children:(0,x.jsx)(g.Z,{value:l.relation||b,className:"condition-relation-select",onChange:function(e){T(e)},children:U.map((function(e){return(0,x.jsx)(S,{value:e.value,children:e.label},e.value)}))})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.l9,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){i($,a)},children:[(0,x.jsx)(N.Z,{visible:$.length>0,children:(0,x.jsx)("div",{children:$.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:(0,x.jsx)("span",{className:"condition-edit-item-content ".concat(e.leave?"quit":""),children:"".concat(e.name).concat(e.leave?"(已离职)":"")})},e.id)}))})}),(0,x.jsx)(N.Z,{visible:0===$.length,children:"添加成员+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.Bv,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){o(a)},children:[(0,x.jsx)(N.Z,{visible:ne.length>0,children:(0,x.jsx)("div",{children:ne.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:(0,x.jsx)("span",{className:"condition-edit-item-content ".concat(e.is_del?"quit":""),children:"".concat(e.role_name).concat(e.is_del?"(已删除)":"")})},e.role_id)}))})}),(0,x.jsx)(N.Z,{visible:0===ne.length,children:"添加+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.Fr,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){d(te,a)},children:[(0,x.jsx)(N.Z,{visible:te.length>0,children:(0,x.jsx)("div",{children:te.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:e.name},e.id)}))})}),(0,x.jsx)(N.Z,{visible:0===te.length,children:"添加部门+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.Al,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){c(ae,a)},children:[(0,x.jsx)(N.Z,{visible:ae.length>0,children:(0,x.jsx)("div",{children:ae.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:e.enterprise_name},e.enterprise_title_id)}))})}),(0,x.jsx)(N.Z,{visible:0===ae.length,children:"选择公司抬头+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.lt,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){r(ce,a)},children:[(0,x.jsx)(N.Z,{visible:ce.length>0,children:(0,x.jsx)("div",{children:ce.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:e.fee_name},e.fee_type)}))})}),(0,x.jsx)(N.Z,{visible:0===ce.length,children:"选择费用类型+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.w7,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){v(re,a)},children:[(0,x.jsx)(N.Z,{visible:re.length>0,children:(0,x.jsx)("div",{children:re.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:e.label},e.value)}))})}),(0,x.jsx)(N.Z,{visible:0===re.length,children:"选择出行方式+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.NY,children:(0,x.jsxs)("div",{className:"condition-edit-mem-sel",onClick:function(){u(ue,a)},children:[(0,x.jsx)(N.Z,{visible:ue.length>0,children:(0,x.jsx)("div",{children:ue.map((function(e){return(0,x.jsx)("span",{className:"condition-edit-member-styl",children:e.label},e.value)}))})}),(0,x.jsx)(N.Z,{visible:0===ue.length,children:"选择出行类型+"})]})}),(0,x.jsx)(N.Z,{visible:l.conditionType===w.l2,children:(0,x.jsx)(_.Z,{placeholder:"请选择办公地点",multiple:!0,style:{flex:1},value:I,onChange:function(e,n,l){q(e),console.log(I),console.log(e,n,l)},children:me})}),(0,x.jsx)(N.Z,{visible:function(e){switch(e){case w.Bc:case w.j4:return!0;default:return!1}}(l.conditionType),children:(0,x.jsxs)("div",{style:{flex:1},children:[(0,x.jsx)(N.Z,{visible:l.relation!==w.xG,children:(0,x.jsx)(Z.Z,{className:"single-input",placeholder:l.conditionType===w.j4?"出差时长（小时）":null,type:"number",value:l.startAmount||O,onChange:he})}),(0,x.jsxs)(N.Z,{visible:l.relation===w.xG,children:[(0,x.jsx)(Z.Z,{className:"double-input-inline",placeholder:l.conditionType===w.j4?"出差时长（小时）":null,type:"number",value:l.startAmount||O,onChange:he}),(0,x.jsx)("span",{className:"input-split",children:"-"}),(0,x.jsx)(Z.Z,{className:"double-input-inline",placeholder:l.conditionType===w.j4?"出差时长（小时）":null,type:"number",value:l.endAmount||H,onChange:function(e){J(e.target.value)}})]})]})})]})}},7791:(e,n,l)=>{l.d(n,{Al:()=>A,Bc:()=>C,Bv:()=>M,Dw:()=>h,EN:()=>f,EZ:()=>y,Fr:()=>w,J_:()=>z,KT:()=>c,LI:()=>T,MZ:()=>b,NY:()=>D,Oh:()=>d,PC:()=>u,S_:()=>B,WD:()=>o,d:()=>m,dA:()=>p,du:()=>j,j4:()=>F,k0:()=>v,l2:()=>E,l9:()=>k,lf:()=>Z,lt:()=>L,ok:()=>g,ux:()=>r,ve:()=>P,w7:()=>S,w9:()=>N,xG:()=>R,xV:()=>s,y5:()=>_,yl:()=>x,zH:()=>O});var t=l(74720),i=l.n(t),a=function(e){e=e||32;for(var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",l=n.length,t="",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*l));return t},o="APPLICANT_NODE",c="ROUTER_NODE",s="END",r=1,d=3,u=4,v=5,p=6,h=1,m=3,f=2,b=4,y=[h,f,b],x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n={user_type:e};return e===f&&(n.level_num="3",n.level_type=1),{node_type:r,key:a(),node_name:"主管审批",child_nodes:[],node_option:"",node_value:i()(n)}},j=function(){return{node_type:d,key:a(),node_name:"财务审核",child_nodes:[],node_option:"",node_value:i()({user_type:1,sign_method:2})}},_=function(){return{node_type:v,key:a(),node_name:"抄送人",child_nodes:[],node_option:"",node_value:i()({})}},g=function(){return{node_type:u,key:a(),node_name:"出纳支付",child_nodes:[],node_option:"",node_value:i()({user_type:1,pay_status:1})}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"条件1",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"优先级1",t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="";return{node_type:p,child_nodes:e,key:a(),node_name:n,node_option:l,node_value:i,default:t}},N=[{label:"直接主管",value:"1"},{label:"第2级主管",value:"2"},{label:"第3级主管",value:"3"},{label:"第4级主管",value:"4"},{label:"第5级主管",value:"5"},{label:"第6级主管",value:"6"},{label:"第7级主管",value:"7"},{label:"第8级主管",value:"8"}],T=[{label:"最高层级主管",value:"1"},{label:"第2个层级主管",value:"2"},{label:"第3个层级主管",value:"3"},{label:"第4个层级主管",value:"4"},{label:"第5个层级主管",value:"5"},{label:"第6个层级主管",value:"6"},{label:"第7个层级主管",value:"7"},{label:"第8个层级主管",value:"8"}],k=1,w=2,A=3,C=4,L=5,S=6,D=7,E=8,F=9,M=10,B=[{label:"申请人",value:k,template_types:"ALL",field:"commiter"},{label:"费用部门",value:w,template_types:"ALL",field:"department"},{label:"公司抬头",value:A,template_types:"ALL",field:"title"},{label:"报销金额",value:C,template_types:[1],field:"amount"},{label:"招待金额",value:C,template_types:[2],field:"amount"},{label:"付款金额",value:C,template_types:[4]},{label:"借款金额",value:C,template_types:[3],field:"amount"},{label:"出行方式",value:S,template_types:[2],field:"trans_way"},{label:"出行类型",value:D,template_types:[2],field:"travel_type"},{label:"费用类型",value:L,template_types:[1,4]},{label:"办公地点",value:E,template_types:"ALL"},{label:"出差时长",value:F,template_types:[2]},{label:"用户组",value:M,template_types:"ALL"}],O=[{label:"属于",value:1},{label:"不属于",value:2}],P=[{label:"包含",value:9},{label:"不包含",value:10}],R=8,z=[{label:"大于",value:3},{label:"大于等于",value:4},{label:"等于",value:5},{label:"小于",value:7},{label:"小于等于",value:6},{label:"介于",value:R}]},56982:(e,n,l)=>{l.d(n,{Z:()=>i});var t=l(67294);function i(e,n,l){var i=t.useRef({});return"value"in i.current&&!l(i.current.condition,n)||(i.current.value=e(),i.current.condition=n),i.current.value}}}]);